

<!DOCTYPE html>
<html lang="pt-BR">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>T√°xi Tapau√°</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <script>
        tailwind.config = {
            theme: {
                extend: {
                    colors: {
                        'taxi-yellow': '#FFD700',
                        'taxi-dark': '#1A1A1A',
                        'taxi-gray': '#2D2D2D'
                    }
                }
            }
        }
    </script>
    <style>
        .toast {
            position: fixed;
            top: 20px;
            right: 20px;
            z-index: 1000;
            transform: translateX(100%);
            transition: transform 0.3s ease;
        }
        .toast.show {
            transform: translateX(0);
        }
        @keyframes pulse {
            0%, 100% { opacity: 1; }
            50% { opacity: 0.5; }
        }
        .pulse-animation {
            animation: pulse 1s infinite;
        }
        .gradient-bg {
            background: linear-gradient(135deg, #FFD700 0%, #FFA500 100%);
        }
        .shadow-taxi {
            box-shadow: 0 4px 20px rgba(255, 215, 0, 0.3);
        }
    </style>
</head>
<body class="bg-gray-50 min-h-screen">
    <!-- Toast Container -->
    <div id="toast-container"></div>
    
    <!-- Audio for notifications -->
    <audio id="notification-sound">
        <source src="data:audio/wav;base64,UklGRnoGAABXQVZFZm10IBAAAAABAAEAQB8AAEAfAAABAAgAZGF0YQoGAACBhYqFbF1fdJivrJBhNjVgodDbq2EcBj+a2/LDciUFLIHO8tiJNwgZaLvt559NEAxQp+PwtmMcBjiR1/LMeSwFJHfH8N2QQAoUXrTp66hVFApGn+DyvmwhBSuBzvLZiTYIG2m98OScTgwOUarm7blmGgU7k9n1unEiBC13yO/eizEIHWq+8+OWT" type="audio/wav">
    </audio>

    <!-- Home Page -->
    <div id="home-page" class="min-h-screen flex flex-col">
        <!-- Header -->
        <div class="gradient-bg text-taxi-dark p-6 shadow-taxi">
            <div class="max-w-md mx-auto text-center">
                <div class="flex items-center justify-center mb-4">
                    <div class="bg-taxi-dark text-taxi-yellow p-3 rounded-full mr-3">
                        <svg class="w-8 h-8" fill="currentColor" viewBox="0 0 24 24">
                            <path d="M18.92 6.01C18.72 5.42 18.16 5 17.5 5h-11c-.66 0-1.22.42-1.42 1.01L3 12v8c0 .55.45 1 1 1h1c.55 0 1-.45 1-1v-1h12v1c0 .55.45 1 1 1h1c.55 0 1-.45 1-1v-8l-2.08-5.99zM6.5 16c-.83 0-1.5-.67-1.5-1.5S5.67 13 6.5 13s1.5.67 1.5 1.5S7.33 16 6.5 16zm11 0c-.83 0-1.5-.67-1.5-1.5s.67-1.5 1.5-1.5 1.5.67 1.5 1.5-.67 1.5-1.5 1.5zM5 11l1.5-4.5h11L19 11H5z"/>
                        </svg>
                    </div>
                    <div>
                        <h1 class="text-3xl font-bold">T√°xi Tapau√°</h1>
                        <p class="text-taxi-dark opacity-80">Seu transporte confi√°vel</p>
                    </div>
                </div>
            </div>
        </div>

        <!-- Main Content -->
        <div class="flex-1 flex items-center justify-center p-6">
            <div class="max-w-sm w-full space-y-4">
                <button onclick="showPassengerInterface('mototaxi')" class="w-full bg-taxi-dark hover:bg-taxi-gray text-taxi-yellow font-bold py-4 px-6 rounded-xl transition duration-200 transform hover:scale-105 shadow-lg">
                    <div class="flex items-center justify-center">
                        <svg class="w-6 h-6 mr-3" fill="currentColor" viewBox="0 0 24 24">
                            <path d="M12 12c2.21 0 4-1.79 4-4s-1.79-4-4-4-4 1.79-4 4 1.79 4 4 4zm0 2c-2.67 0-8 1.34-8 4v2h16v-2c0-2.66-5.33-4-8-4z"/>
                        </svg>
                        Chamar um Mototaxista
                    </div>
                </button>
                
                <button onclick="showPassengerInterface('frete')" class="w-full bg-blue-600 hover:bg-blue-700 text-white font-bold py-4 px-6 rounded-xl transition duration-200 transform hover:scale-105 shadow-lg">
                    <div class="flex items-center justify-center">
                        <svg class="w-6 h-6 mr-3" fill="currentColor" viewBox="0 0 24 24">
                            <path d="M20 8h-3V4H3c-1.1 0-2 .9-2 2v11h2c0 1.66 1.34 3 3 3s3-1.34 3-3h6c0 1.66 1.34 3 3 3s3-1.34 3-3h2v-5l-3-4zM6 18.5c-.83 0-1.5-.67-1.5-1.5s.67-1.5 1.5-1.5 1.5.67 1.5 1.5-.67 1.5-1.5 1.5zm13.5-9l1.96 2.5H17V9.5h2.5zm-1.5 9c-.83 0-1.5-.67-1.5-1.5s.67-1.5 1.5-1.5 1.5.67 1.5 1.5-.67 1.5-1.5 1.5z"/>
                        </svg>
                        Chamar um Carro Frete
                    </div>
                </button>
                
                <button onclick="showDriverInterface()" class="w-full bg-taxi-yellow hover:bg-yellow-400 text-taxi-dark font-bold py-4 px-6 rounded-xl transition duration-200 transform hover:scale-105 shadow-lg">
                    <div class="flex items-center justify-center">
                        <svg class="w-6 h-6 mr-3" fill="currentColor" viewBox="0 0 24 24">
                            <path d="M18.92 6.01C18.72 5.42 18.16 5 17.5 5h-11c-.66 0-1.22.42-1.42 1.01L3 12v8c0 .55.45 1 1 1h1c.55 0 1-.45 1-1v-1h12v1c0 .55.45 1 1 1h1c.55 0 1-.45 1-1v-8l-2.08-5.99zM6.5 16c-.83 0-1.5-.67-1.5-1.5S5.67 13 6.5 13s1.5.67 1.5 1.5S7.33 16 6.5 16zm11 0c-.83 0-1.5-.67-1.5-1.5s.67-1.5 1.5-1.5 1.5.67 1.5 1.5-.67 1.5-1.5 1.5z"/>
                        </svg>
                        Sou Motorista
                    </div>
                </button>
                
                <button onclick="showAdminLogin()" class="w-full bg-gray-600 hover:bg-gray-700 text-white font-medium py-3 px-6 rounded-xl transition duration-200">
                    <div class="flex items-center justify-center">
                        <svg class="w-5 h-5 mr-2" fill="currentColor" viewBox="0 0 24 24">
                            <path d="M12 1L3 5v6c0 5.55 3.84 10.74 9 12 5.16-1.26 9-6.45 9-12V5l-9-4z"/>
                        </svg>
                        Administra√ß√£o
                    </div>
                </button>
            </div>
        </div>
    </div>

    <!-- Passenger Interface -->
    <div id="passenger-page" class="hidden min-h-screen bg-gray-50">
        <!-- Header -->
        <div class="gradient-bg text-taxi-dark p-4 shadow-taxi">
            <div class="flex items-center">
                <button onclick="showHomePage()" class="mr-4 p-2 rounded-full hover:bg-black hover:bg-opacity-10">
                    <svg class="w-6 h-6" fill="currentColor" viewBox="0 0 24 24">
                        <path d="M20 11H7.83l5.59-5.59L12 4l-8 8 8 8 1.41-1.41L7.83 13H20v-2z"/>
                    </svg>
                </button>
                <h2 id="passenger-title" class="text-xl font-bold">Solicitar Corrida</h2>
            </div>
        </div>

        <div class="p-6 max-w-md mx-auto">
            <!-- Trip Form -->
            <div class="bg-white rounded-2xl shadow-lg p-6 mb-6">
                <!-- Origin -->
                <div class="relative mb-4">
                    <div class="flex items-center mb-2">
                        <div class="w-3 h-3 bg-green-500 rounded-full mr-3"></div>
                        <label class="text-sm font-medium text-gray-700">De onde?</label>
                    </div>
                    <input type="text" id="origin-input" class="w-full p-4 bg-gray-50 rounded-lg focus:ring-2 focus:ring-taxi-yellow focus:bg-white transition-all" placeholder="Escolha um local de partida">
                    <button onclick="useGPS('origin')" class="absolute right-3 top-12 text-taxi-yellow hover:text-yellow-600">
                        <svg class="w-5 h-5" fill="currentColor" viewBox="0 0 24 24">
                            <path d="M12 2C8.13 2 5 5.13 5 9c0 5.25 7 13 7 13s7-7.75 7-13c0-3.87-3.13-7-7-7zm0 9.5c-1.38 0-2.5-1.12-2.5-2.5s1.12-2.5 2.5-2.5 2.5 1.12 2.5 2.5-1.12 2.5-2.5 2.5z"/>
                        </svg>
                    </button>
                    <div id="origin-suggestions" class="absolute z-10 w-full bg-white border border-gray-200 rounded-lg mt-1 hidden shadow-lg"></div>
                </div>

                <!-- Destination -->
                <div class="relative mb-6">
                    <div class="flex items-center mb-2">
                        <div class="w-3 h-3 bg-red-500 rounded-full mr-3"></div>
                        <label class="text-sm font-medium text-gray-700">Para onde?</label>
                    </div>
                    <input type="text" id="destination-input" class="w-full p-4 bg-gray-50 rounded-lg focus:ring-2 focus:ring-taxi-yellow focus:bg-white transition-all" placeholder="Escolha um destino">
                    <button onclick="useGPS('destination')" class="absolute right-3 top-12 text-taxi-yellow hover:text-yellow-600">
                        <svg class="w-5 h-5" fill="currentColor" viewBox="0 0 24 24">
                            <path d="M12 2C8.13 2 5 5.13 5 9c0 5.25 7 13 7 13s7-7.75 7-13c0-3.87-3.13-7-7-7zm0 9.5c-1.38 0-2.5-1.12-2.5-2.5s1.12-2.5 2.5-2.5 2.5 1.12 2.5 2.5-1.12 2.5-2.5 2.5z"/>
                        </svg>
                    </button>
                    <div id="destination-suggestions" class="absolute z-10 w-full bg-white border border-gray-200 rounded-lg mt-1 hidden shadow-lg"></div>
                </div>

                <!-- Price Display -->
                <div class="bg-taxi-yellow bg-opacity-20 p-4 rounded-lg text-center mb-6">
                    <div id="ride-price" class="text-2xl font-bold text-taxi-dark">R$ 8,00</div>
                    <div class="text-sm text-gray-600">Tarifa fixa</div>
                </div>

                <!-- Request Button -->
                <button id="request-ride-btn" onclick="requestRide()" class="w-full gradient-bg text-taxi-dark font-bold py-4 px-6 rounded-xl transition duration-200 transform hover:scale-105 shadow-lg">
                    <span id="request-btn-text">Solicitar T√°xi Tapau√°</span>
                </button>
            </div>

            <!-- Ride Status -->
            <div id="ride-status" class="hidden bg-white rounded-2xl shadow-lg p-6">
                <div class="text-center">
                    <div id="status-icon" class="text-6xl mb-4">üîç</div>
                    <h3 id="status-title" class="font-bold text-xl mb-2">Procurando motorista...</h3>
                    <p id="status-description" class="text-gray-600 mb-4">Aguarde enquanto encontramos um t√°xi dispon√≠vel</p>
                    
                    <!-- Driver Details -->
                    <div id="driver-details" class="hidden">
                        <div class="bg-gray-50 rounded-lg p-4 mb-4">
                            <div class="flex items-center">
                                <div class="w-12 h-12 bg-taxi-yellow rounded-full flex items-center justify-center mr-4">
                                    <svg class="w-6 h-6 text-taxi-dark" fill="currentColor" viewBox="0 0 24 24">
                                        <path d="M12 12c2.21 0 4-1.79 4-4s-1.79-4-4-4-4 1.79-4 4 1.79 4 4 4zm0 2c-2.67 0-8 1.34-8 4v2h16v-2c0-2.66-5.33-4-8-4z"/>
                                    </svg>
                                </div>
                                <div class="text-left">
                                    <div class="font-bold" id="driver-name">-</div>
                                    <div class="text-sm text-gray-600" id="driver-phone">-</div>
                                    <div class="text-sm text-gray-600">T√°xi ‚Ä¢ Placa ABC-1234</div>
                                </div>
                            </div>
                        </div>
                        
                        <div class="flex space-x-3">
                            <button class="flex-1 bg-green-500 text-white py-2 px-4 rounded-lg font-medium">
                                üìû Ligar
                            </button>
                            <button class="flex-1 bg-blue-500 text-white py-2 px-4 rounded-lg font-medium">
                                üí¨ Mensagem
                            </button>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <!-- Driver Interface -->
    <div id="driver-page" class="hidden min-h-screen bg-gray-50">
        <!-- Header -->
        <div class="gradient-bg text-taxi-dark p-4 shadow-taxi">
            <div class="flex items-center">
                <button onclick="showHomePage()" class="mr-4 p-2 rounded-full hover:bg-black hover:bg-opacity-10">
                    <svg class="w-6 h-6" fill="currentColor" viewBox="0 0 24 24">
                        <path d="M20 11H7.83l5.59-5.59L12 4l-8 8 8 8 1.41-1.41L7.83 13H20v-2z"/>
                    </svg>
                </button>
                <h2 class="text-xl font-bold">Motorista Parceiro</h2>
            </div>
        </div>

        <!-- Registration Form -->
        <div id="driver-registration" class="p-6 max-w-md mx-auto">
            <div class="bg-white rounded-2xl shadow-lg p-6">
                <h3 class="text-xl font-bold text-center mb-6">Cadastre-se como Motorista</h3>
                
                <div class="space-y-4">
                    <select id="driver-type" class="w-full p-4 bg-gray-50 rounded-lg focus:ring-2 focus:ring-taxi-yellow focus:bg-white transition-all">
                        <option value="">Selecione o tipo de servi√ßo</option>
                        <option value="mototaxi">üèçÔ∏è Mototaxista</option>
                        <option value="frete">üöõ Motorista de Carro Frete</option>
                    </select>
                    <input type="text" id="driver-name" class="w-full p-4 bg-gray-50 rounded-lg focus:ring-2 focus:ring-taxi-yellow focus:bg-white transition-all" placeholder="Nome completo">
                    <input type="tel" id="driver-phone" class="w-full p-4 bg-gray-50 rounded-lg focus:ring-2 focus:ring-taxi-yellow focus:bg-white transition-all" placeholder="Telefone">
                    <input type="text" id="driver-cpf" class="w-full p-4 bg-gray-50 rounded-lg focus:ring-2 focus:ring-taxi-yellow focus:bg-white transition-all" placeholder="CPF">
                    <input type="number" id="driver-age" class="w-full p-4 bg-gray-50 rounded-lg focus:ring-2 focus:ring-taxi-yellow focus:bg-white transition-all" placeholder="Idade" min="18">

                </div>
                
                <button onclick="registerDriver()" class="w-full gradient-bg text-taxi-dark font-bold py-4 px-6 rounded-xl mt-6 transition duration-200 transform hover:scale-105 shadow-lg">
                    Cadastrar
                </button>
            </div>
        </div>

        <!-- Driver Dashboard -->
        <div id="driver-dashboard" class="hidden p-6 max-w-md mx-auto space-y-6">
            <!-- Payment Status -->
            <div id="payment-status" class="bg-white rounded-2xl shadow-lg p-6">
                <div class="text-center">
                    <div class="w-16 h-16 bg-red-100 rounded-full flex items-center justify-center mx-auto mb-4">
                        <svg class="w-8 h-8 text-red-500" fill="currentColor" viewBox="0 0 24 24">
                            <path d="M11.8 10.9c-2.27-.59-3-1.2-3-2.15 0-1.09 1.01-1.85 2.7-1.85 1.78 0 2.44.85 2.5 2.1h2.21c-.07-1.72-1.12-3.3-3.21-3.81V3h-3v2.16c-1.94.42-3.5 1.68-3.5 3.61 0 2.31 1.91 3.46 4.7 4.13 2.5.6 3 1.48 3 2.41 0 .69-.49 1.79-2.7 1.79-2.06 0-2.87-.92-2.98-2.1h-2.2c.12 2.19 1.76 3.42 3.68 3.83V21h3v-2.15c1.95-.37 3.5-1.5 3.5-3.55 0-2.84-2.43-3.81-4.7-4.4z"/>
                        </svg>
                    </div>
                    <h3 class="font-bold text-lg mb-2">Taxa Di√°ria Pendente</h3>
                    <p class="text-gray-600 mb-4">Pague R$ 3,00 para come√ßar a receber corridas</p>
                    <button onclick="makePayment()" class="w-full bg-red-500 hover:bg-red-600 text-white font-bold py-3 px-6 rounded-xl transition duration-200">
                        Pagar via PIX - R$ 3,00
                    </button>
                </div>
            </div>

            <!-- Status Toggle -->
            <div class="bg-white rounded-2xl shadow-lg p-6">
                <div class="flex items-center justify-between">
                    <div>
                        <h3 class="font-bold text-lg">Status</h3>
                        <p class="text-gray-600 text-sm">Dispon√≠vel para corridas</p>
                    </div>
                    <button id="status-toggle" onclick="toggleDriverStatus()" class="bg-gray-400 text-white px-6 py-3 rounded-full font-medium" disabled>
                        Offline
                    </button>
                </div>
            </div>

            <!-- Daily Stats -->
            <div class="grid grid-cols-2 gap-4">
                <div class="bg-white rounded-2xl shadow-lg p-6 text-center">
                    <div class="text-3xl font-bold text-taxi-yellow" id="daily-rides">0</div>
                    <div class="text-sm text-gray-600">Corridas</div>
                </div>
                <div class="bg-white rounded-2xl shadow-lg p-6 text-center">
                    <div class="text-3xl font-bold text-green-500" id="daily-earnings">R$ 0</div>
                    <div class="text-sm text-gray-600">Ganhos</div>
                </div>
            </div>

            <!-- Available Rides -->
            <div id="available-rides" class="bg-white rounded-2xl shadow-lg p-6">
                <h3 class="font-bold text-lg mb-4">Corridas Dispon√≠veis</h3>
                <div id="rides-list">
                    <p class="text-gray-500 text-center py-8">Nenhuma corrida dispon√≠vel</p>
                </div>
            </div>

            <!-- Current Ride -->
            <div id="current-ride" class="hidden bg-white rounded-2xl shadow-lg p-6">
                <h3 class="font-bold text-lg mb-4">Corrida Atual</h3>
                <div id="current-ride-details" class="mb-4"></div>
                <button onclick="finishRide()" class="w-full bg-green-500 hover:bg-green-600 text-white font-bold py-3 px-6 rounded-xl transition duration-200">
                    Finalizar Corrida
                </button>
            </div>
        </div>
    </div>

    <!-- Admin Login -->
    <div id="admin-login" class="hidden min-h-screen bg-gray-50 flex items-center justify-center p-6">
        <div class="max-w-sm w-full bg-white rounded-2xl shadow-lg p-6">
            <div class="text-center mb-6">
                <div class="w-16 h-16 bg-taxi-yellow rounded-full flex items-center justify-center mx-auto mb-4">
                    <svg class="w-8 h-8 text-taxi-dark" fill="currentColor" viewBox="0 0 24 24">
                        <path d="M12 1L3 5v6c0 5.55 3.84 10.74 9 12 5.16-1.26 9-6.45 9-12V5l-9-4z"/>
                    </svg>
                </div>
                <h2 class="text-xl font-bold">√Årea Administrativa</h2>
            </div>
            
            <div class="space-y-4">
                <input type="password" id="admin-password" class="w-full p-4 bg-gray-50 rounded-lg focus:ring-2 focus:ring-taxi-yellow focus:bg-white transition-all" placeholder="Senha de administrador">
                <button onclick="adminLogin()" class="w-full bg-taxi-dark hover:bg-taxi-gray text-taxi-yellow font-bold py-4 px-6 rounded-xl transition duration-200">
                    Entrar
                </button>
                <button onclick="showHomePage()" class="w-full bg-gray-200 hover:bg-gray-300 text-gray-700 font-medium py-3 px-6 rounded-xl transition duration-200">
                    Voltar
                </button>
            </div>
        </div>
    </div>

    <!-- Admin Dashboard -->
    <div id="admin-dashboard" class="hidden min-h-screen bg-gray-50">
        <!-- Header -->
        <div class="gradient-bg text-taxi-dark p-4 shadow-taxi">
            <div class="flex items-center">
                <button onclick="showHomePage()" class="mr-4 p-2 rounded-full hover:bg-black hover:bg-opacity-10">
                    <svg class="w-6 h-6" fill="currentColor" viewBox="0 0 24 24">
                        <path d="M20 11H7.83l5.59-5.59L12 4l-8 8 8 8 1.41-1.41L7.83 13H20v-2z"/>
                    </svg>
                </button>
                <h2 class="text-xl font-bold">Dashboard Administrativo</h2>
            </div>
        </div>
        
        <div class="p-6 max-w-6xl mx-auto">
            <!-- Stats Cards -->
            <div class="grid grid-cols-1 md:grid-cols-4 gap-6 mb-8">
                <div class="bg-white rounded-2xl shadow-lg p-6 text-center">
                    <div class="text-4xl font-bold text-taxi-yellow" id="total-drivers">0</div>
                    <div class="text-gray-600">Total de Motoristas</div>
                </div>
                <div class="bg-white rounded-2xl shadow-lg p-6 text-center">
                    <div class="text-4xl font-bold text-green-500" id="online-drivers">0</div>
                    <div class="text-gray-600">Motoristas Online</div>
                </div>
                <div class="bg-white rounded-2xl shadow-lg p-6 text-center">
                    <div class="text-4xl font-bold text-blue-500" id="active-rides">0</div>
                    <div class="text-gray-600">Corridas Ativas</div>
                </div>
                <div class="bg-white rounded-2xl shadow-lg p-6 text-center">
                    <div class="text-4xl font-bold text-purple-500" id="total-earnings">R$ 0</div>
                    <div class="text-gray-600">Arrecada√ß√£o Total</div>
                </div>
            </div>

            <!-- Control Panel -->
            <div class="grid grid-cols-1 lg:grid-cols-2 gap-6 mb-8">
                <!-- Notification Panel -->
                <div class="bg-white rounded-2xl shadow-lg p-6">
                    <h3 class="font-bold text-xl mb-4">Enviar Notifica√ß√£o</h3>
                    <div class="space-y-4">
                        <select id="notification-target" class="w-full p-3 bg-gray-50 rounded-lg focus:ring-2 focus:ring-taxi-yellow">
                            <option value="all">Todos os Motoristas</option>
                            <option value="online">Apenas Online</option>
                            <option value="offline">Apenas Offline</option>
                            <option value="mototaxi">Apenas Mototaxistas</option>
                            <option value="frete">Apenas Carro Frete</option>
                        </select>
                        <textarea id="notification-message" class="w-full p-3 bg-gray-50 rounded-lg focus:ring-2 focus:ring-taxi-yellow h-24" placeholder="Digite sua mensagem..."></textarea>
                        <button onclick="sendNotification()" class="w-full bg-taxi-yellow hover:bg-yellow-400 text-taxi-dark font-bold py-3 px-6 rounded-xl transition duration-200">
                            üì¢ Enviar Notifica√ß√£o
                        </button>
                    </div>
                </div>

                <!-- Quick Actions -->
                <div class="bg-white rounded-2xl shadow-lg p-6">
                    <h3 class="font-bold text-xl mb-4">A√ß√µes R√°pidas</h3>
                    <div class="space-y-3">
                        <button onclick="resetDailyPayments()" class="w-full bg-blue-500 hover:bg-blue-600 text-white font-medium py-3 px-4 rounded-lg transition duration-200">
                            üîÑ Resetar Pagamentos Di√°rios
                        </button>
                        <button onclick="exportDriversData()" class="w-full bg-green-500 hover:bg-green-600 text-white font-medium py-3 px-4 rounded-lg transition duration-200">
                            üìä Exportar Dados dos Motoristas
                        </button>
                        <button onclick="clearAllRides()" class="w-full bg-orange-500 hover:bg-orange-600 text-white font-medium py-3 px-4 rounded-lg transition duration-200">
                            üóëÔ∏è Limpar Hist√≥rico de Corridas
                        </button>
                        <button onclick="blockAllDrivers()" class="w-full bg-red-500 hover:bg-red-600 text-white font-medium py-3 px-4 rounded-lg transition duration-200">
                            üö´ Bloquear Todos os Motoristas
                        </button>
                    </div>
                </div>
            </div>

            <!-- Drivers List -->
            <div class="bg-white rounded-2xl shadow-lg p-6">
                <div class="flex justify-between items-center mb-6">
                    <h3 class="font-bold text-xl">Motoristas Cadastrados</h3>
                    <div class="flex space-x-2">
                        <select id="driver-filter" onchange="filterDrivers()" class="p-2 bg-gray-50 rounded-lg text-sm">
                            <option value="all">Todos</option>
                            <option value="online">Online</option>
                            <option value="offline">Offline</option>
                            <option value="mototaxi">Mototaxistas</option>
                            <option value="frete">Carro Frete</option>
                        </select>
                        <button onclick="refreshDriversList()" class="bg-taxi-yellow text-taxi-dark px-4 py-2 rounded-lg text-sm font-medium">
                            üîÑ Atualizar
                        </button>
                    </div>
                </div>
                <div id="drivers-list" class="space-y-4">
                    <!-- Drivers will be populated here -->
                </div>
            </div>

            <!-- Individual Notification Modal -->
            <div id="individual-notification-modal" class="hidden fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50">
                <div class="bg-white rounded-2xl p-6 max-w-md w-full mx-4">
                    <h3 class="font-bold text-xl mb-4">Enviar Notifica√ß√£o Individual</h3>
                    <div class="mb-4">
                        <p class="text-gray-600 mb-2">Para: <span id="individual-driver-name" class="font-medium"></span></p>
                    </div>
                    <textarea id="individual-message" class="w-full p-3 bg-gray-50 rounded-lg focus:ring-2 focus:ring-taxi-yellow h-24 mb-4" placeholder="Digite sua mensagem..."></textarea>
                    <div class="flex space-x-3">
                        <button onclick="sendIndividualNotification()" class="flex-1 bg-taxi-yellow hover:bg-yellow-400 text-taxi-dark font-bold py-3 px-6 rounded-xl transition duration-200">
                            Enviar
                        </button>
                        <button onclick="closeIndividualModal()" class="flex-1 bg-gray-300 hover:bg-gray-400 text-gray-700 font-medium py-3 px-6 rounded-xl transition duration-200">
                            Cancelar
                        </button>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <script>
        // Local data storage
        let appData = {
            drivers: JSON.parse(localStorage.getItem('taxi_drivers') || '[]'),
            rides: JSON.parse(localStorage.getItem('taxi_rides') || '[]'),
            currentUser: null,
            adminPassword: '@Zxcasdqwe123'
        };

        // Local places in Tapau√°
        const tapauaPlaces = [
            'Centro de Tapau√°', 'Mercado Municipal', 'Igreja Matriz', 'Escola Municipal',
            'Posto de Sa√∫de', 'Prefeitura', 'Porto do Rio', 'Feira Livre',
            'Rua Principal', 'Bairro S√£o Jos√©', 'Bairro Santa Maria', 'Terminal Rodovi√°rio',
            'Pra√ßa Central', 'Banco do Brasil', 'Correios', 'Farm√°cia Popular',
            'Hospital Municipal', 'Est√°dio Municipal', 'Shopping Center', 'Universidade'
        ];

        // Utility Functions
        function saveData() {
            localStorage.setItem('taxi_drivers', JSON.stringify(appData.drivers));
            localStorage.setItem('taxi_rides', JSON.stringify(appData.rides));
        }

        function showToast(message, type = 'info') {
            const toast = document.createElement('div');
            const bgColor = type === 'success' ? 'bg-green-500' : type === 'error' ? 'bg-red-500' : 'bg-blue-500';
            toast.className = `toast p-4 rounded-lg text-white ${bgColor} shadow-lg`;
            toast.textContent = message;
            
            document.getElementById('toast-container').appendChild(toast);
            
            setTimeout(() => toast.classList.add('show'), 100);
            setTimeout(() => {
                toast.classList.remove('show');
                setTimeout(() => toast.remove(), 300);
            }, 3000);
        }

        function playNotificationSound() {
            const audio = document.getElementById('notification-sound');
            audio.play().catch(() => {});
        }

        function generateId() {
            return Date.now().toString(36) + Math.random().toString(36).substr(2);
        }

        // Navigation Functions
        function showHomePage() {
            document.querySelectorAll('[id$="-page"], [id$="-login"], [id$="-dashboard"]').forEach(el => el.classList.add('hidden'));
            document.getElementById('home-page').classList.remove('hidden');
        }

        function showPassengerInterface(type = 'mototaxi') {
            document.querySelectorAll('[id$="-page"], [id$="-login"], [id$="-dashboard"]').forEach(el => el.classList.add('hidden'));
            document.getElementById('passenger-page').classList.remove('hidden');
            
            // Update interface based on type
            const title = document.getElementById('passenger-title');
            const price = document.getElementById('ride-price');
            const btnText = document.getElementById('request-btn-text');
            
            if (type === 'frete') {
                title.textContent = 'Chamar um Carro Frete';
                price.textContent = 'R$ 26,00';
                btnText.textContent = 'Chamar Carro Frete';
                window.currentRideType = 'frete';
            } else {
                title.textContent = 'Chamar um Mototaxista';
                price.textContent = 'R$ 6,00';
                btnText.textContent = 'Chamar Mototaxista';
                window.currentRideType = 'mototaxi';
            }
            
            setupAutocomplete();
        }

        function showDriverInterface() {
            document.querySelectorAll('[id$="-page"], [id$="-login"], [id$="-dashboard"]').forEach(el => el.classList.add('hidden'));
            document.getElementById('driver-page').classList.remove('hidden');
            
            const savedDriver = localStorage.getItem('current_driver');
            if (savedDriver) {
                appData.currentUser = JSON.parse(savedDriver);
                showDriverDashboard();
            }
        }

        function showAdminLogin() {
            document.querySelectorAll('[id$="-page"], [id$="-login"], [id$="-dashboard"]').forEach(el => el.classList.add('hidden'));
            document.getElementById('admin-login').classList.remove('hidden');
        }

        // Autocomplete Functions
        function setupAutocomplete() {
            const originInput = document.getElementById('origin-input');
            const destinationInput = document.getElementById('destination-input');
            
            originInput.addEventListener('input', (e) => showSuggestions(e.target.value, 'origin-suggestions'));
            destinationInput.addEventListener('input', (e) => showSuggestions(e.target.value, 'destination-suggestions'));
            
            document.addEventListener('click', (e) => {
                if (!e.target.closest('.relative')) {
                    document.querySelectorAll('[id$="-suggestions"]').forEach(el => el.classList.add('hidden'));
                }
            });
        }

        function showSuggestions(query, containerId) {
            const container = document.getElementById(containerId);
            
            if (query.length < 2) {
                container.classList.add('hidden');
                return;
            }
            
            const filtered = tapauaPlaces.filter(place => 
                place.toLowerCase().includes(query.toLowerCase())
            );
            
            if (filtered.length === 0) {
                container.classList.add('hidden');
                return;
            }
            
            container.innerHTML = filtered.map(place => 
                `<div class="p-3 hover:bg-gray-50 cursor-pointer border-b border-gray-100 last:border-b-0" onclick="selectPlace('${place}', '${containerId}')">${place}</div>`
            ).join('');
            
            container.classList.remove('hidden');
        }

        function selectPlace(place, containerId) {
            const inputId = containerId.replace('-suggestions', '-input');
            document.getElementById(inputId).value = place;
            document.getElementById(containerId).classList.add('hidden');
        }

        function useGPS(type) {
            const places = ['Centro de Tapau√°', 'Mercado Municipal', 'Porto do Rio'];
            const randomPlace = places[Math.floor(Math.random() * places.length)];
            document.getElementById(`${type}-input`).value = randomPlace;
            showToast(`üìç Localiza√ß√£o obtida: ${randomPlace}`, 'success');
        }

        // Passenger Functions
        function requestRide() {
            const origin = document.getElementById('origin-input').value;
            const destination = document.getElementById('destination-input').value;
            
            if (!origin || !destination) {
                showToast('Por favor, preencha origem e destino', 'error');
                return;
            }
            
            const rideType = window.currentRideType || 'mototaxi';
            const price = rideType === 'frete' ? 26.00 : 6.00;
            
            const ride = {
                id: generateId(),
                origin,
                destination,
                price: price,
                type: rideType,
                status: 'searching',
                passengerId: 'passenger_' + Date.now(),
                driverId: null,
                createdAt: new Date().toISOString()
            };
            
            appData.rides.push(ride);
            saveData();
            
            document.getElementById('request-ride-btn').classList.add('hidden');
            document.getElementById('ride-status').classList.remove('hidden');
            
            const serviceType = rideType === 'frete' ? 'carro frete' : 'motot√°xi';
            showToast(`Corrida solicitada! Procurando ${serviceType}...`, 'success');
            
            // Simulate finding a driver
            setTimeout(() => {
                const availableDrivers = appData.drivers.filter(d => 
                    d.status === 'online' && 
                    d.paymentStatus === 'paid' && 
                    d.type === rideType
                );
                if (availableDrivers.length > 0) {
                    const driver = availableDrivers[0];
                    ride.driverId = driver.id;
                    ride.status = 'accepted';
                    
                    const vehicleIcon = rideType === 'frete' ? 'üöõ' : 'üèçÔ∏è';
                    const vehicleText = rideType === 'frete' ? 'Carro frete' : 'Motot√°xi';
                    
                    document.getElementById('status-icon').textContent = vehicleIcon;
                    document.getElementById('status-title').textContent = `${vehicleText} encontrado!`;
                    document.getElementById('status-description').textContent = 'Seu motorista est√° a caminho';
                    
                    document.getElementById('driver-name').textContent = driver.name;
                    document.getElementById('driver-phone').textContent = driver.phone;
                    document.getElementById('driver-details').classList.remove('hidden');
                    
                    saveData();
                    showToast(`${vehicleText} encontrado!`, 'success');
                    
                    setTimeout(() => {
                        ride.status = 'completed';
                        document.getElementById('status-icon').textContent = '‚úÖ';
                        document.getElementById('status-title').textContent = 'Corrida finalizada!';
                        document.getElementById('status-description').textContent = 'Obrigado por usar o T√°xi Tapau√°';
                        saveData();
                        showToast('Corrida finalizada com sucesso!', 'success');
                    }, 15000);
                } else {
                    showToast('Nenhum t√°xi dispon√≠vel no momento', 'error');
                }
            }, 3000);
        }

        // Driver Functions
        function registerDriver() {
            const type = document.getElementById('driver-type').value;
            const name = document.getElementById('driver-name').value;
            const phone = document.getElementById('driver-phone').value;
            const cpf = document.getElementById('driver-cpf').value;
            const age = document.getElementById('driver-age').value;
            
            if (!type || !name || !phone || !cpf || !age) {
                showToast('Por favor, preencha todos os campos', 'error');
                return;
            }
            
            if (parseInt(age) < 18) {
                showToast('Idade m√≠nima: 18 anos', 'error');
                return;
            }
            
            const driver = {
                id: generateId(),
                type,
                name,
                phone,
                cpf,
                age: parseInt(age),
                status: 'offline',
                paymentStatus: 'pending',
                dailyRides: 0,
                dailyEarnings: 0,
                registeredAt: new Date().toISOString()
            };
            
            appData.drivers.push(driver);
            appData.currentUser = driver;
            localStorage.setItem('current_driver', JSON.stringify(driver));
            saveData();
            
            showToast('Cadastro realizado com sucesso!', 'success');
            showDriverDashboard();
        }

        function showDriverDashboard() {
            document.getElementById('driver-registration').classList.add('hidden');
            document.getElementById('driver-dashboard').classList.remove('hidden');
            updateDriverDashboard();
        }

        function updateDriverDashboard() {
            const driver = appData.currentUser;
            if (!driver) return;
            
            const paymentDiv = document.getElementById('payment-status');
            if (driver.paymentStatus === 'paid') {
                paymentDiv.innerHTML = `
                    <div class="text-center">
                        <div class="w-16 h-16 bg-green-100 rounded-full flex items-center justify-center mx-auto mb-4">
                            <svg class="w-8 h-8 text-green-500" fill="currentColor" viewBox="0 0 24 24">
                                <path d="M9 16.17L4.83 12l-1.42 1.41L9 19 21 7l-1.41-1.41z"/>
                            </svg>
                        </div>
                        <h3 class="font-bold text-lg text-green-600">Pagamento em Dia</h3>
                        <p class="text-gray-600">Voc√™ pode receber corridas hoje</p>
                    </div>
                `;
                
                document.getElementById('status-toggle').disabled = false;
                const statusBtn = document.getElementById('status-toggle');
                if (driver.status === 'online') {
                    statusBtn.className = 'bg-green-500 text-white px-6 py-3 rounded-full font-medium';
                    statusBtn.textContent = 'Online';
                } else {
                    statusBtn.className = 'bg-gray-500 text-white px-6 py-3 rounded-full font-medium';
                    statusBtn.textContent = 'Offline';
                }
            }
            
            document.getElementById('daily-rides').textContent = driver.dailyRides;
            document.getElementById('daily-earnings').textContent = `R$ ${driver.dailyEarnings.toFixed(0)}`;
            
            updateAvailableRides();
        }

        function makePayment() {
            showToast('Processando pagamento PIX...', 'info');
            
            setTimeout(() => {
                appData.currentUser.paymentStatus = 'paid';
                const driverIndex = appData.drivers.findIndex(d => d.id === appData.currentUser.id);
                if (driverIndex !== -1) {
                    appData.drivers[driverIndex] = appData.currentUser;
                }
                localStorage.setItem('current_driver', JSON.stringify(appData.currentUser));
                saveData();
                
                showToast('Pagamento realizado com sucesso!', 'success');
                updateDriverDashboard();
            }, 2000);
        }

        function toggleDriverStatus() {
            const driver = appData.currentUser;
            if (driver.paymentStatus !== 'paid') {
                showToast('Realize o pagamento di√°rio primeiro', 'error');
                return;
            }
            
            driver.status = driver.status === 'online' ? 'offline' : 'online';
            
            const driverIndex = appData.drivers.findIndex(d => d.id === driver.id);
            if (driverIndex !== -1) {
                appData.drivers[driverIndex] = driver;
            }
            
            localStorage.setItem('current_driver', JSON.stringify(driver));
            saveData();
            
            showToast(`Status: ${driver.status === 'online' ? 'Online' : 'Offline'}`, 'success');
            updateDriverDashboard();
            
            if (driver.status === 'online') {
                startListeningForRides();
            }
        }

        function startListeningForRides() {
            setInterval(() => {
                if (appData.currentUser && appData.currentUser.status === 'online') {
                    updateAvailableRides();
                }
            }, 5000);
        }

        function updateAvailableRides() {
            const driverType = appData.currentUser ? appData.currentUser.type : 'mototaxi';
            const availableRides = appData.rides.filter(r => 
                r.status === 'searching' && 
                r.type === driverType
            );
            const ridesList = document.getElementById('rides-list');
            
            if (availableRides.length === 0) {
                ridesList.innerHTML = '<p class="text-gray-500 text-center py-8">Nenhuma corrida dispon√≠vel</p>';
                return;
            }
            
            ridesList.innerHTML = availableRides.map(ride => `
                <div class="border border-gray-200 rounded-lg p-4 mb-3">
                    <div class="flex justify-between items-start">
                        <div class="flex-1">
                            <div class="flex items-center mb-2">
                                <div class="w-3 h-3 bg-green-500 rounded-full mr-2"></div>
                                <span class="font-medium">${ride.origin}</span>
                            </div>
                            <div class="flex items-center mb-3">
                                <div class="w-3 h-3 bg-red-500 rounded-full mr-2"></div>
                                <span class="text-gray-600">${ride.destination}</span>
                            </div>
                            <div class="text-xl font-bold text-green-600">R$ ${ride.price.toFixed(2)}</div>
                        </div>
                        <button onclick="acceptRide('${ride.id}')" class="gradient-bg text-taxi-dark px-4 py-2 rounded-lg font-bold pulse-animation">
                            Aceitar
                        </button>
                    </div>
                </div>
            `).join('');
            
            if (availableRides.length > 0) {
                playNotificationSound();
            }
        }

        function acceptRide(rideId) {
            const ride = appData.rides.find(r => r.id === rideId);
            if (!ride) return;
            
            ride.status = 'accepted';
            ride.driverId = appData.currentUser.id;
            
            document.getElementById('current-ride-details').innerHTML = `
                <div class="space-y-3">
                    <div class="flex items-center">
                        <div class="w-3 h-3 bg-green-500 rounded-full mr-3"></div>
                        <span><strong>Origem:</strong> ${ride.origin}</span>
                    </div>
                    <div class="flex items-center">
                        <div class="w-3 h-3 bg-red-500 rounded-full mr-3"></div>
                        <span><strong>Destino:</strong> ${ride.destination}</span>
                    </div>
                    <div class="text-xl font-bold text-green-600">R$ ${ride.price.toFixed(2)}</div>
                </div>
            `;
            
            document.getElementById('current-ride').classList.remove('hidden');
            saveData();
            showToast('Corrida aceita!', 'success');
            updateAvailableRides();
        }

        function finishRide() {
            const currentRide = appData.rides.find(r => r.driverId === appData.currentUser.id && r.status === 'accepted');
            if (!currentRide) return;
            
            currentRide.status = 'completed';
            appData.currentUser.dailyRides++;
            const netEarnings = currentRide.price - 1.00; // Taxa de R$ 1,00 por corrida
            appData.currentUser.dailyEarnings += netEarnings;
            
            const driverIndex = appData.drivers.findIndex(d => d.id === appData.currentUser.id);
            if (driverIndex !== -1) {
                appData.drivers[driverIndex] = appData.currentUser;
            }
            
            localStorage.setItem('current_driver', JSON.stringify(appData.currentUser));
            saveData();
            
            document.getElementById('current-ride').classList.add('hidden');
            showToast(`Corrida finalizada! +R$ ${netEarnings.toFixed(2)} (taxa: R$ 1,00)`, 'success');
            updateDriverDashboard();
        }

        // Admin Functions
        function adminLogin() {
            const password = document.getElementById('admin-password').value;
            
            if (password === appData.adminPassword) {
                document.getElementById('admin-login').classList.add('hidden');
                document.getElementById('admin-dashboard').classList.remove('hidden');
                updateAdminDashboard();
                showToast('Login realizado com sucesso!', 'success');
            } else {
                showToast('Senha incorreta!', 'error');
            }
        }

        function updateAdminDashboard() {
            const totalDrivers = appData.drivers.length;
            const onlineDrivers = appData.drivers.filter(d => d.status === 'online').length;
            const activeRides = appData.rides.filter(r => r.status === 'accepted').length;
            const totalEarnings = appData.drivers.reduce((sum, driver) => sum + driver.dailyEarnings, 0);
            
            document.getElementById('total-drivers').textContent = totalDrivers;
            document.getElementById('online-drivers').textContent = onlineDrivers;
            document.getElementById('active-rides').textContent = activeRides;
            document.getElementById('total-earnings').textContent = `R$ ${totalEarnings.toFixed(2)}`;
            
            renderDriversList();
        }

        function renderDriversList(filter = 'all') {
            let filteredDrivers = appData.drivers;
            
            switch(filter) {
                case 'online':
                    filteredDrivers = appData.drivers.filter(d => d.status === 'online');
                    break;
                case 'offline':
                    filteredDrivers = appData.drivers.filter(d => d.status === 'offline');
                    break;
                case 'mototaxi':
                    filteredDrivers = appData.drivers.filter(d => d.type === 'mototaxi');
                    break;
                case 'frete':
                    filteredDrivers = appData.drivers.filter(d => d.type === 'frete');
                    break;
            }
            
            const driversList = document.getElementById('drivers-list');
            
            if (filteredDrivers.length === 0) {
                driversList.innerHTML = '<p class="text-gray-500 text-center py-8">Nenhum motorista encontrado</p>';
                return;
            }
            
            driversList.innerHTML = filteredDrivers.map(driver => {
                const typeIcon = driver.type === 'frete' ? 'üöõ' : 'üèçÔ∏è';
                const typeText = driver.type === 'frete' ? 'Carro Frete' : 'Motot√°xi';
                const statusColor = driver.status === 'online' ? 'bg-green-500' : 'bg-gray-400';
                const paymentStatus = driver.paymentStatus === 'paid' ? '‚úÖ Pago' : '‚ùå Pendente';
                
                return `
                <div class="border border-gray-200 rounded-lg p-4">
                    <div class="flex justify-between items-start">
                        <div class="flex items-center flex-1">
                            <div class="w-12 h-12 bg-taxi-yellow rounded-full flex items-center justify-center mr-4 text-xl">
                                ${typeIcon}
                            </div>
                            <div class="flex-1">
                                <div class="font-bold text-lg">${driver.name}</div>
                                <div class="text-sm text-gray-600 mb-1">${driver.phone} ‚Ä¢ CPF: ${driver.cpf}</div>
                                <div class="flex items-center text-sm mb-2">
                                    <div class="w-2 h-2 rounded-full ${statusColor} mr-2"></div>
                                    <span class="mr-3">${driver.status === 'online' ? 'Online' : 'Offline'}</span>
                                    <span class="mr-3">${typeText}</span>
                                    <span class="mr-3">${paymentStatus}</span>
                                </div>
                                <div class="text-sm text-gray-600">
                                    <span class="mr-4">üìä ${driver.dailyRides} corridas hoje</span>
                                    <span class="mr-4">üí∞ R$ ${driver.dailyEarnings.toFixed(2)} ganhos</span>
                                    <span>üìÖ Cadastrado: ${new Date(driver.registeredAt).toLocaleDateString()}</span>
                                </div>
                            </div>
                        </div>
                        <div class="flex flex-col space-y-2 ml-4">
                            <button onclick="openIndividualNotification('${driver.id}', '${driver.name}')" class="bg-blue-500 hover:bg-blue-600 text-white px-3 py-1 rounded text-sm font-medium">
                                üìß Notificar
                            </button>
                            <button onclick="toggleDriverStatus('${driver.id}')" class="bg-yellow-500 hover:bg-yellow-600 text-white px-3 py-1 rounded text-sm font-medium">
                                ${driver.status === 'online' ? '‚è∏Ô∏è Offline' : '‚ñ∂Ô∏è Online'}
                            </button>
                            <button onclick="removeDriver('${driver.id}')" class="bg-red-500 hover:bg-red-600 text-white px-3 py-1 rounded text-sm font-medium">
                                üóëÔ∏è Remover
                            </button>
                        </div>
                    </div>
                </div>
                `;
            }).join('');
        }

        function removeDriver(driverId) {
            if (confirm('Tem certeza que deseja remover este motorista da plataforma?')) {
                const driver = appData.drivers.find(d => d.id === driverId);
                appData.drivers = appData.drivers.filter(d => d.id !== driverId);
                
                // Remove driver from localStorage if it's the current user
                const currentDriver = localStorage.getItem('current_driver');
                if (currentDriver) {
                    const parsedDriver = JSON.parse(currentDriver);
                    if (parsedDriver.id === driverId) {
                        localStorage.removeItem('current_driver');
                    }
                }
                
                saveData();
                updateAdminDashboard();
                showToast(`Motorista ${driver.name} removido da plataforma!`, 'success');
            }
        }

        // Admin notification functions
        function sendNotification() {
            const target = document.getElementById('notification-target').value;
            const message = document.getElementById('notification-message').value;
            
            if (!message.trim()) {
                showToast('Digite uma mensagem para enviar', 'error');
                return;
            }
            
            let targetDrivers = [];
            
            switch(target) {
                case 'all':
                    targetDrivers = appData.drivers;
                    break;
                case 'online':
                    targetDrivers = appData.drivers.filter(d => d.status === 'online');
                    break;
                case 'offline':
                    targetDrivers = appData.drivers.filter(d => d.status === 'offline');
                    break;
                case 'mototaxi':
                    targetDrivers = appData.drivers.filter(d => d.type === 'mototaxi');
                    break;
                case 'frete':
                    targetDrivers = appData.drivers.filter(d => d.type === 'frete');
                    break;
            }
            
            // Simulate sending notification
            showToast(`Notifica√ß√£o enviada para ${targetDrivers.length} motorista(s)!`, 'success');
            document.getElementById('notification-message').value = '';
            
            // In a real app, this would send push notifications or SMS
            console.log(`Notification sent to ${targetDrivers.length} drivers: ${message}`);
        }

        function openIndividualNotification(driverId, driverName) {
            document.getElementById('individual-driver-name').textContent = driverName;
            document.getElementById('individual-notification-modal').classList.remove('hidden');
            window.currentNotificationDriverId = driverId;
        }

        function closeIndividualModal() {
            document.getElementById('individual-notification-modal').classList.add('hidden');
            document.getElementById('individual-message').value = '';
            window.currentNotificationDriverId = null;
        }

        function sendIndividualNotification() {
            const message = document.getElementById('individual-message').value;
            const driverId = window.currentNotificationDriverId;
            
            if (!message.trim()) {
                showToast('Digite uma mensagem para enviar', 'error');
                return;
            }
            
            const driver = appData.drivers.find(d => d.id === driverId);
            if (driver) {
                showToast(`Notifica√ß√£o enviada para ${driver.name}!`, 'success');
                closeIndividualModal();
                
                // In a real app, this would send a push notification or SMS
                console.log(`Individual notification sent to ${driver.name}: ${message}`);
            }
        }

        function toggleDriverStatus(driverId) {
            const driver = appData.drivers.find(d => d.id === driverId);
            if (driver) {
                driver.status = driver.status === 'online' ? 'offline' : 'online';
                saveData();
                updateAdminDashboard();
                showToast(`${driver.name} agora est√° ${driver.status === 'online' ? 'online' : 'offline'}`, 'success');
            }
        }

        function filterDrivers() {
            const filter = document.getElementById('driver-filter').value;
            renderDriversList(filter);
        }

        function refreshDriversList() {
            updateAdminDashboard();
            showToast('Lista atualizada!', 'success');
        }

        // Quick actions
        function resetDailyPayments() {
            if (confirm('Resetar todos os pagamentos di√°rios? Todos os motoristas precisar√£o pagar novamente.')) {
                appData.drivers.forEach(driver => {
                    driver.paymentStatus = 'pending';
                    driver.dailyRides = 0;
                    driver.dailyEarnings = 0;
                });
                saveData();
                updateAdminDashboard();
                showToast('Pagamentos di√°rios resetados!', 'success');
            }
        }

        function exportDriversData() {
            const data = appData.drivers.map(driver => ({
                nome: driver.name,
                telefone: driver.phone,
                cpf: driver.cpf,
                tipo: driver.type === 'frete' ? 'Carro Frete' : 'Motot√°xi',
                status: driver.status === 'online' ? 'Online' : 'Offline',
                pagamento: driver.paymentStatus === 'paid' ? 'Pago' : 'Pendente',
                corridas_hoje: driver.dailyRides,
                ganhos_hoje: `R$ ${driver.dailyEarnings.toFixed(2)}`,
                cadastrado_em: new Date(driver.registeredAt).toLocaleDateString()
            }));
            
            const csvContent = "data:text/csv;charset=utf-8," 
                + "Nome,Telefone,CPF,Tipo,Status,Pagamento,Corridas Hoje,Ganhos Hoje,Cadastrado Em\n"
                + data.map(row => Object.values(row).join(",")).join("\n");
            
            const encodedUri = encodeURI(csvContent);
            const link = document.createElement("a");
            link.setAttribute("href", encodedUri);
            link.setAttribute("download", `motoristas_${new Date().toISOString().split('T')[0]}.csv`);
            document.body.appendChild(link);
            link.click();
            document.body.removeChild(link);
            
            showToast('Dados exportados com sucesso!', 'success');
        }

        function clearAllRides() {
            if (confirm('Limpar todo o hist√≥rico de corridas? Esta a√ß√£o n√£o pode ser desfeita.')) {
                appData.rides = [];
                saveData();
                updateAdminDashboard();
                showToast('Hist√≥rico de corridas limpo!', 'success');
            }
        }

        function blockAllDrivers() {
            if (confirm('Bloquear todos os motoristas? Eles ficar√£o offline e n√£o poder√£o receber corridas.')) {
                appData.drivers.forEach(driver => {
                    driver.status = 'offline';
                });
                saveData();
                updateAdminDashboard();
                showToast('Todos os motoristas foram bloqueados!', 'success');
            }
        }

        // Initialize app
        document.addEventListener('DOMContentLoaded', function() {
            showHomePage();
            
            const now = new Date();
            const lastReset = localStorage.getItem('last_daily_reset');
            const today = now.toDateString();
            
            if (lastReset !== today) {
                appData.drivers.forEach(driver => {
                    driver.dailyRides = 0;
                    driver.dailyEarnings = 0;
                    driver.paymentStatus = 'pending';
                });
                saveData();
                localStorage.setItem('last_daily_reset', today);
            }
        });
    </script>
<script>(function(){function c(){var b=a.contentDocument||a.contentWindow.document;if(b){var d=b.createElement('script');d.innerHTML="window.__CF$cv$params={r:'95a8de0d1087d838',t:'MTc1MTczOTUzMi4wMDAwMDA='};var a=document.createElement('script');a.nonce='';a.src='/cdn-cgi/challenge-platform/scripts/jsd/main.js';document.getElementsByTagName('head')[0].appendChild(a);";b.getElementsByTagName('head')[0].appendChild(d)}}if(document.body){var a=document.createElement('iframe');a.height=1;a.width=1;a.style.position='absolute';a.style.top=0;a.style.left=0;a.style.border='none';a.style.visibility='hidden';document.body.appendChild(a);if('loading'!==document.readyState)c();else if(window.addEventListener)document.addEventListener('DOMContentLoaded',c);else{var e=document.onreadystatechange||function(){};document.onreadystatechange=function(b){e(b);'loading'!==document.readyState&&(document.onreadystatechange=e,c())}}}})();</script></body>
</html>
