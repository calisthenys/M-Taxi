<!DOCTYPE html>
<html lang="pt-BR">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>MotoTáxi Tapauá</title>
  <link href="https://cdn.jsdelivr.net/npm/tailwindcss@3.4.1/dist/tailwind.min.css" rel="stylesheet">
</head>
<body class="bg-gray-100 text-gray-800">
  <div class="min-h-screen flex flex-col items-center p-6">
    <h1 class="text-3xl font-bold mb-2">MotoTáxi Tapauá</h1>
    <p class="mb-6 text-gray-600">Conectando você ao seu destino</p>

    <div id="telaInicial" class="flex gap-4 mb-8">
      <button onclick="mostrarTela('passageiro')" class="px-4 py-2 bg-blue-500 text-white rounded">Passageiro</button>
      <button onclick="mostrarTela('motorista')" class="px-4 py-2 bg-green-500 text-white rounded">Motorista</button>
    </div>

    <!-- Passageiro -->
    <div id="telaPassageiro" class="hidden w-full max-w-md bg-white p-4 rounded shadow">
      <h2 class="text-xl font-semibold mb-2">Solicitar Corrida</h2>
      <input id="origem" list="locais" placeholder="Origem" class="w-full mb-2 p-2 border rounded" />
      <input id="destino" list="locais" placeholder="Destino" class="w-full mb-2 p-2 border rounded" />
      <datalist id="locais">
        <option>Centro</option>
        <option>Praça da Matriz</option>
        <option>Porto</option>
        <option>Mercado Municipal</option>
        <option>Escola Estadual Tapauá</option>
        <option>Posto de Saúde</option>
        <option>Estádio Municipal</option>
        <option>Delegacia</option>
        <option>Bairro Novo</option>
        <option>Igreja São José</option>
      </datalist>
      <button onclick="solicitarCorrida()" class="w-full bg-blue-600 text-white py-2 rounded">Solicitar Corrida (R$ 5,00)</button>
      <div id="statusCorrida" class="mt-4 text-sm text-gray-700"></div>
      <button onclick="voltarHome()" class="mt-4 text-sm underline text-blue-600">Voltar</button>
    </div>

    <!-- Motorista -->
    <div id="telaMotorista" class="hidden w-full max-w-md bg-white p-4 rounded shadow">
      <h2 class="text-xl font-semibold mb-4">Corridas Disponíveis</h2>
      <div id="listaCorridas"></div>
      <button onclick="voltarHome()" class="mt-4 text-sm underline text-green-600">Voltar</button>
    </div>
  </div>

  <script>
    function mostrarTela(tela) {
      document.getElementById('telaInicial').classList.add('hidden');
      document.getElementById('telaPassageiro').classList.add('hidden');
      document.getElementById('telaMotorista').classList.add('hidden');
      if (tela === 'passageiro') document.getElementById('telaPassageiro').classList.remove('hidden');
      if (tela === 'motorista') {
        document.getElementById('telaMotorista').classList.remove('hidden');
        carregarCorridas();
      }
    }

    function voltarHome() {
      document.getElementById('telaInicial').classList.remove('hidden');
      document.getElementById('telaPassageiro').classList.add('hidden');
      document.getElementById('telaMotorista').classList.add('hidden');
    }

    function solicitarCorrida() {
      const origem = document.getElementById('origem').value;
      const destino = document.getElementById('destino').value;
      const corrida = {
        origem,
        destino,
        status: 'Procurando motorista...',
        id: Date.now()
      };
      localStorage.setItem('corrida', JSON.stringify(corrida));
      document.getElementById('statusCorrida').innerText = 'Status: ' + corrida.status;
    }

    function carregarCorridas() {
      const listaDiv = document.getElementById('listaCorridas');
      listaDiv.innerHTML = '';
      const corrida = JSON.parse(localStorage.getItem('corrida'));
      if (corrida && corrida.status === 'Procurando motorista...') {
        const div = document.createElement('div');
        div.className = 'mb-4 p-3 border rounded';
        div.innerHTML = `<p><strong>Origem:</strong> ${corrida.origem}</p>
                         <p><strong>Destino:</strong> ${corrida.destino}</p>
                         <p><strong>Status:</strong> ${corrida.status}</p>
                         <button onclick="aceitarCorrida(${corrida.id})" class="mt-2 bg-green-500 text-white px-3 py-1 rounded">Aceitar Corrida</button>`;
        listaDiv.appendChild(div);
      } else {
        listaDiv.innerHTML = '<p class="text-sm text-gray-600">Nenhuma corrida disponível no momento.</p>';
      }
    }

    function aceitarCorrida(id) {
      const corrida = JSON.parse(localStorage.getItem('corrida'));
      if (corrida && corrida.id == id) {
        corrida.status = 'Aceita por motorista';
        localStorage.setItem('corrida', JSON.stringify(corrida));
        alert('Corrida aceita!');
        carregarCorridas();
      }
    }
  </script>
</body>
</html>
