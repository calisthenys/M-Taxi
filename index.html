

<!DOCTYPE html>
<html lang="pt-BR">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>T√°xi Tapau√°</title>
    <script src="https://cdn.tailwindcss.com"></script>
    
    <!-- Firebase SDK -->
    <script src="https://www.gstatic.com/firebasejs/9.23.0/firebase-app-compat.js"></script>
    <script src="https://www.gstatic.com/firebasejs/9.23.0/firebase-database-compat.js"></script>
    <script src="https://www.gstatic.com/firebasejs/9.23.0/firebase-auth-compat.js"></script>
    
    <script>
        tailwind.config = {
            theme: {
                extend: {
                    colors: {
                        'taxi-yellow': '#FFD700',
                        'taxi-dark': '#1A1A1A',
                        'taxi-gray': '#2D2D2D'
                    }
                }
            }
        }
    </script>
    <style>
        .toast {
            position: fixed;
            top: 20px;
            right: 20px;
            z-index: 1000;
            transform: translateX(100%);
            transition: transform 0.3s ease;
        }
        .toast.show {
            transform: translateX(0);
        }
        .gradient-bg {
            background: linear-gradient(135deg, #FFD700 0%, #FFA500 100%);
        }
        .shadow-taxi {
            box-shadow: 0 4px 20px rgba(255, 215, 0, 0.3);
        }
        .pulse-animation {
            animation: pulse 1s infinite;
        }
        @keyframes pulse {
            0%, 100% { opacity: 1; }
            50% { opacity: 0.5; }
        }
    </style>
</head>
<body class="bg-gray-50 min-h-screen">
    <!-- Toast Container -->
    <div id="toast-container"></div>

    <!-- Login Page -->
    <div id="login-page" class="min-h-screen flex flex-col">
        <!-- Header -->
        <div class="gradient-bg text-taxi-dark p-6 shadow-taxi">
            <div class="max-w-md mx-auto text-center">
                <div class="flex items-center justify-center mb-4">
                    <div class="bg-taxi-dark text-taxi-yellow p-3 rounded-full mr-3">
                        <svg class="w-8 h-8" fill="currentColor" viewBox="0 0 24 24">
                            <path d="M18.92 6.01C18.72 5.42 18.16 5 17.5 5h-11c-.66 0-1.22.42-1.42 1.01L3 12v8c0 .55.45 1 1 1h1c.55 0 1-.45 1-1v-1h12v1c0 .55.45 1 1 1h1c.55 0 1-.45 1-1v-8l-2.08-5.99zM6.5 16c-.83 0-1.5-.67-1.5-1.5S5.67 13 6.5 13s1.5.67 1.5 1.5S7.33 16 6.5 16zm11 0c-.83 0-1.5-.67-1.5-1.5s.67-1.5 1.5-1.5 1.5.67 1.5 1.5-.67 1.5-1.5 1.5zM5 11l1.5-4.5h11L19 11H5z"/>
                        </svg>
                    </div>
                    <div>
                        <h1 class="text-3xl font-bold">T√°xi Tapau√°</h1>
                        <p class="text-taxi-dark opacity-80">Seu transporte confi√°vel</p>
                    </div>
                </div>
            </div>
        </div>

        <!-- Main Content -->
        <div class="flex-1 flex items-center justify-center p-6">
            <div class="max-w-sm w-full space-y-4">
                <div class="text-center mb-8">
                    <h2 class="text-2xl font-bold text-gray-800 mb-2">Bem-vindo!</h2>
                    <p class="text-gray-600">Como voc√™ deseja usar o aplicativo?</p>
                </div>
                
                <button onclick="showPassengerLogin()" class="w-full bg-taxi-dark hover:bg-taxi-gray text-taxi-yellow font-bold py-4 px-6 rounded-xl transition duration-200 transform hover:scale-105 shadow-lg">
                    <div class="flex items-center justify-center">
                        <span class="text-2xl mr-3">üë§</span>
                        Sou Passageiro
                    </div>
                </button>
                
                <button onclick="showDriverInterface()" class="w-full bg-taxi-yellow hover:bg-yellow-400 text-taxi-dark font-bold py-4 px-6 rounded-xl transition duration-200 transform hover:scale-105 shadow-lg">
                    <div class="flex items-center justify-center">
                        <span class="text-2xl mr-3">üë®‚Äçüíº</span>
                        Sou Motorista
                    </div>
                </button>
                
                <button onclick="showAdminLogin()" class="w-full bg-gray-600 hover:bg-gray-700 text-white font-medium py-3 px-6 rounded-xl transition duration-200">
                    <div class="flex items-center justify-center">
                        <span class="text-xl mr-2">üõ°Ô∏è</span>
                        Administra√ß√£o
                    </div>
                </button>
            </div>
        </div>
    </div>

    <!-- Passenger Login -->
    <div id="passenger-login" class="hidden min-h-screen bg-gray-50">
        <!-- Header -->
        <div class="gradient-bg text-taxi-dark p-4 shadow-taxi">
            <div class="flex items-center">
                <button onclick="showLoginPage()" class="mr-4 p-2 rounded-full hover:bg-black hover:bg-opacity-10">
                    <svg class="w-6 h-6" fill="currentColor" viewBox="0 0 24 24">
                        <path d="M20 11H7.83l5.59-5.59L12 4l-8 8 8 8 1.41-1.41L7.83 13H20v-2z"/>
                    </svg>
                </button>
                <h2 class="text-xl font-bold">Login do Passageiro</h2>
            </div>
        </div>

        <div class="p-6 max-w-md mx-auto">
            <!-- Login Form -->
            <div class="bg-white rounded-2xl shadow-lg p-6 mb-6">
                <div class="text-center mb-6">
                    <div class="w-16 h-16 bg-taxi-yellow rounded-full flex items-center justify-center mx-auto mb-4">
                        <span class="text-3xl">üë§</span>
                    </div>
                    <h3 class="text-xl font-bold mb-2">Entre ou Cadastre-se</h3>
                    <p class="text-gray-600 text-sm">Informe seus dados para continuar</p>
                </div>
                
                <div class="space-y-4">
                    <input type="text" id="passenger-name" class="w-full p-4 bg-gray-50 rounded-lg focus:ring-2 focus:ring-taxi-yellow focus:bg-white transition-all" placeholder="Seu nome completo">
                    <input type="tel" id="passenger-phone" class="w-full p-4 bg-gray-50 rounded-lg focus:ring-2 focus:ring-taxi-yellow focus:bg-white transition-all" placeholder="Seu telefone (11) 99999-9999">
                </div>
                
                <button onclick="loginPassenger()" class="w-full gradient-bg text-taxi-dark font-bold py-4 px-6 rounded-xl mt-6 transition duration-200 transform hover:scale-105 shadow-lg">
                    Entrar
                </button>
                
                <div class="text-center mt-4">
                    <p class="text-xs text-gray-500">
                        Ao continuar, voc√™ concorda com nossos termos de uso
                    </p>
                </div>
            </div>
        </div>
    </div>

    <!-- Home Page -->
    <div id="home-page" class="hidden min-h-screen flex flex-col">
        <!-- Header -->
        <div class="gradient-bg text-taxi-dark p-6 shadow-taxi">
            <div class="max-w-md mx-auto">
                <div class="flex items-center justify-between">
                    <div class="flex items-center">
                        <div class="bg-taxi-dark text-taxi-yellow p-2 rounded-full mr-3">
                            <svg class="w-6 h-6" fill="currentColor" viewBox="0 0 24 24">
                                <path d="M18.92 6.01C18.72 5.42 18.16 5 17.5 5h-11c-.66 0-1.22.42-1.42 1.01L3 12v8c0 .55.45 1 1 1h1c.55 0 1-.45 1-1v-1h12v1c0 .55.45 1 1 1h1c.55 0 1-.45 1-1v-8l-2.08-5.99zM6.5 16c-.83 0-1.5-.67-1.5-1.5S5.67 13 6.5 13s1.5.67 1.5 1.5S7.33 16 6.5 16zm11 0c-.83 0-1.5-.67-1.5-1.5s.67-1.5 1.5-1.5 1.5.67 1.5 1.5-.67 1.5-1.5 1.5zM5 11l1.5-4.5h11L19 11H5z"/>
                            </svg>
                        </div>
                        <div>
                            <h1 class="text-xl font-bold">T√°xi Tapau√°</h1>
                            <p class="text-sm opacity-80" id="welcome-message">Ol√°!</p>
                        </div>
                    </div>
                    <button onclick="logoutPassenger()" class="p-2 rounded-full hover:bg-black hover:bg-opacity-10">
                        <svg class="w-5 h-5" fill="currentColor" viewBox="0 0 24 24">
                            <path d="M17 7l-1.41 1.41L18.17 11H8v2h10.17l-2.58 2.59L17 17l5-5zM4 5h8V3H4c-1.1 0-2 .9-2 2v14c0 1.1.9 2 2 2h8v-2H4V5z"/>
                        </svg>
                    </button>
                </div>
            </div>
        </div>

        <!-- Main Content -->
        <div class="flex-1 flex items-center justify-center p-6">
            <div class="max-w-sm w-full space-y-4">
                <button onclick="showPassengerInterface('mototaxi')" class="w-full bg-taxi-dark hover:bg-taxi-gray text-taxi-yellow font-bold py-4 px-6 rounded-xl transition duration-200 transform hover:scale-105 shadow-lg">
                    <div class="flex items-center justify-center">
                        <span class="text-2xl mr-3">üèçÔ∏è</span>
                        Chamar um Mototaxista
                    </div>
                </button>
                
                <button onclick="showPassengerInterface('frete')" class="w-full bg-blue-600 hover:bg-blue-700 text-white font-bold py-4 px-6 rounded-xl transition duration-200 transform hover:scale-105 shadow-lg">
                    <div class="flex items-center justify-center">
                        <span class="text-2xl mr-3">üöõ</span>
                        Chamar um Carro Frete
                    </div>
                </button>
                
                <!-- Divider -->
                <div class="flex items-center my-6">
                    <div class="flex-1 border-t border-gray-300"></div>
                    <span class="px-4 text-gray-500 text-sm">Pain√©is de Controle</span>
                    <div class="flex-1 border-t border-gray-300"></div>
                </div>
                
                <button onclick="showDriverInterface()" class="w-full bg-green-600 hover:bg-green-700 text-white font-bold py-3 px-6 rounded-xl transition duration-200 transform hover:scale-105 shadow-lg">
                    <div class="flex items-center justify-center">
                        <span class="text-xl mr-3">üë®‚Äçüíº</span>
                        Painel dos Motoristas
                    </div>
                </button>
                
                <button onclick="showAdminLogin()" class="w-full bg-purple-600 hover:bg-purple-700 text-white font-bold py-3 px-6 rounded-xl transition duration-200 transform hover:scale-105 shadow-lg">
                    <div class="flex items-center justify-center">
                        <span class="text-xl mr-3">üõ°Ô∏è</span>
                        Painel Administrativo
                    </div>
                </button>
            </div>
        </div>
    </div>

    <!-- Passenger Interface -->
    <div id="passenger-page" class="hidden min-h-screen bg-gray-50">
        <!-- Header -->
        <div class="gradient-bg text-taxi-dark p-4 shadow-taxi">
            <div class="flex items-center">
                <button onclick="showHomePage()" class="mr-4 p-2 rounded-full hover:bg-black hover:bg-opacity-10">
                    <svg class="w-6 h-6" fill="currentColor" viewBox="0 0 24 24">
                        <path d="M20 11H7.83l5.59-5.59L12 4l-8 8 8 8 1.41-1.41L7.83 13H20v-2z"/>
                    </svg>
                </button>
                <h2 id="passenger-title" class="text-xl font-bold">Solicitar Corrida</h2>
            </div>
        </div>

        <div class="p-6 max-w-md mx-auto">
            <!-- Trip Form -->
            <div class="bg-white rounded-2xl shadow-lg p-6 mb-6">
                <!-- Origin -->
                <div class="relative mb-4">
                    <div class="flex items-center mb-2">
                        <div class="w-3 h-3 bg-green-500 rounded-full mr-3"></div>
                        <label class="text-sm font-medium text-gray-700">Meu Local de Partida</label>
                    </div>
                    <div class="relative">
                        <input type="text" id="origin-input" class="w-full p-4 pr-12 bg-gray-50 rounded-lg focus:ring-2 focus:ring-taxi-yellow focus:bg-white transition-all" placeholder="Digite sua localiza√ß√£o atual">
                        <button id="origin-voice-btn" onclick="startVoiceRecording('origin')" class="absolute right-3 top-1/2 transform -translate-y-1/2 p-2 text-gray-500 hover:text-taxi-yellow transition-colors">
                            <svg class="w-5 h-5" fill="currentColor" viewBox="0 0 24 24">
                                <path d="M12 14c1.66 0 3-1.34 3-3V5c0-1.66-1.34-3-3-3S9 3.34 9 5v6c0 1.66 1.34 3 3 3z"/>
                                <path d="M17 11c0 2.76-2.24 5-5 5s-5-2.24-5-5H5c0 3.53 2.61 6.43 6 6.92V21h2v-3.08c3.39-.49 6-3.39 6-6.92h-2z"/>
                            </svg>
                        </button>
                    </div>
                </div>

                <!-- Destination -->
                <div class="relative mb-6">
                    <div class="flex items-center mb-2">
                        <div class="w-3 h-3 bg-red-500 rounded-full mr-3"></div>
                        <label class="text-sm font-medium text-gray-700">Para onde estou Indo</label>
                    </div>
                    <div class="relative">
                        <input type="text" id="destination-input" class="w-full p-4 pr-12 bg-gray-50 rounded-lg focus:ring-2 focus:ring-taxi-yellow focus:bg-white transition-all" placeholder="Digite seu destino">
                        <button id="destination-voice-btn" onclick="startVoiceRecording('destination')" class="absolute right-3 top-1/2 transform -translate-y-1/2 p-2 text-gray-500 hover:text-taxi-yellow transition-colors">
                            <svg class="w-5 h-5" fill="currentColor" viewBox="0 0 24 24">
                                <path d="M12 14c1.66 0 3-1.34 3-3V5c0-1.66-1.34-3-3-3S9 3.34 9 5v6c0 1.66 1.34 3 3 3z"/>
                                <path d="M17 11c0 2.76-2.24 5-5 5s-5-2.24-5-5H5c0 3.53 2.61 6.43 6 6.92V21h2v-3.08c3.39-.49 6-3.39 6-6.92h-2z"/>
                            </svg>
                        </button>
                    </div>
                </div>

                <!-- Price Display -->
                <div class="bg-taxi-yellow bg-opacity-20 p-4 rounded-lg text-center mb-6">
                    <div id="ride-price" class="text-2xl font-bold text-taxi-dark">R$ 6,00</div>
                    <div class="text-sm text-gray-600">Tarifa fixa</div>
                </div>

                <!-- Request Button -->
                <button id="request-ride-btn" onclick="requestRide()" class="w-full gradient-bg text-taxi-dark font-bold py-4 px-6 rounded-xl transition duration-200 transform hover:scale-105 shadow-lg">
                    <span id="request-btn-text">Solicitar Motot√°xi</span>
                </button>
            </div>


        </div>
    </div>

    <!-- Waiting Screen -->
    <div id="waiting-page" class="hidden min-h-screen bg-gray-50">
        <!-- Header -->
        <div class="gradient-bg text-taxi-dark p-4 shadow-taxi">
            <div class="flex items-center">
                <button onclick="cancelFromWaiting()" class="mr-4 p-2 rounded-full hover:bg-black hover:bg-opacity-10">
                    <svg class="w-6 h-6" fill="currentColor" viewBox="0 0 24 24">
                        <path d="M20 11H7.83l5.59-5.59L12 4l-8 8 8 8 1.41-1.41L7.83 13H20v-2z"/>
                    </svg>
                </button>
                <h2 id="waiting-title" class="text-xl font-bold">Procurando Mototaxista</h2>
            </div>
        </div>

        <div class="p-6 max-w-md mx-auto">
            <!-- Status Card -->
            <div class="bg-white rounded-2xl shadow-lg p-6 mb-6">
                <div class="text-center">
                    <div id="waiting-status-icon" class="text-6xl mb-4 pulse-animation">üîç</div>
                    <h3 id="waiting-status-title" class="font-bold text-xl mb-2">Procurando motorista...</h3>
                    <p id="waiting-status-description" class="text-gray-600 mb-6">Aguarde enquanto encontramos um motorista dispon√≠vel para voc√™</p>
                    
                    <!-- Loading Animation -->
                    <div class="flex justify-center mb-6">
                        <div class="flex space-x-1">
                            <div class="w-2 h-2 bg-taxi-yellow rounded-full animate-bounce"></div>
                            <div class="w-2 h-2 bg-taxi-yellow rounded-full animate-bounce" style="animation-delay: 0.1s"></div>
                            <div class="w-2 h-2 bg-taxi-yellow rounded-full animate-bounce" style="animation-delay: 0.2s"></div>
                        </div>
                    </div>
                    
                    <!-- Cancel Button -->
                    <div id="waiting-cancel-section">
                        <button onclick="cancelFromWaiting()" class="bg-red-500 hover:bg-red-600 text-white font-bold py-3 px-8 rounded-xl transition duration-200">
                            ‚ùå Cancelar Corrida
                        </button>
                    </div>
                </div>
            </div>

            <!-- Trip Summary -->
            <div class="bg-white rounded-2xl shadow-lg p-6 mb-6">
                <h3 class="font-bold text-lg mb-4 text-center">Detalhes da Corrida</h3>
                
                <!-- Route -->
                <div class="space-y-3 mb-6">
                    <div class="flex items-center">
                        <div class="w-4 h-4 bg-green-500 rounded-full mr-3"></div>
                        <div class="flex-1">
                            <div class="text-xs text-gray-500 mb-1">Saindo de:</div>
                            <div class="font-medium" id="waiting-origin">-</div>
                        </div>
                    </div>
                    
                    <div class="ml-2 border-l-2 border-gray-200 h-6"></div>
                    
                    <div class="flex items-center">
                        <div class="w-4 h-4 bg-red-500 rounded-full mr-3"></div>
                        <div class="flex-1">
                            <div class="text-xs text-gray-500 mb-1">Indo para:</div>
                            <div class="font-medium" id="waiting-destination">-</div>
                        </div>
                    </div>
                </div>

                <!-- Price -->
                <div class="bg-taxi-yellow bg-opacity-20 p-4 rounded-lg text-center mb-4">
                    <div id="waiting-price" class="text-2xl font-bold text-taxi-dark">R$ 6,00</div>
                    <div class="text-sm text-gray-600">Tarifa fixa</div>
                </div>
            </div>

            <!-- Driver Found Card -->
            <div id="driver-found-card" class="hidden bg-white rounded-2xl shadow-lg p-6">
                <div class="text-center mb-6">
                    <div class="text-6xl mb-4">‚úÖ</div>
                    <h3 class="font-bold text-xl text-green-600 mb-2">Motorista Encontrado!</h3>
                    <p class="text-gray-600">Seu motorista est√° a caminho</p>
                </div>

                <!-- Driver Info -->
                <div class="bg-gradient-to-r from-taxi-yellow to-yellow-400 rounded-2xl p-6 mb-6">
                    <div class="flex items-center mb-4">
                        <div class="w-16 h-16 bg-white rounded-full flex items-center justify-center mr-4 shadow-lg">
                            <span id="found-driver-vehicle-icon" class="text-3xl">üèçÔ∏è</span>
                        </div>
                        <div class="text-left text-taxi-dark">
                            <div class="font-bold text-xl" id="found-driver-name">-</div>
                            <div class="text-sm opacity-80" id="found-driver-phone">-</div>
                        </div>
                    </div>
                    
                    <div class="bg-white bg-opacity-20 rounded-lg p-3">
                        <div class="text-taxi-dark text-sm">
                            <div class="flex justify-between mb-1">
                                <span>Ve√≠culo:</span>
                                <span class="font-medium" id="found-driver-vehicle-type">Motot√°xi</span>
                            </div>
                            <div class="flex justify-between">
                                <span>Cor:</span>
                                <span class="font-medium" id="found-driver-vehicle-color">-</span>
                            </div>
                        </div>
                    </div>
                </div>

                <!-- Action Buttons -->
                <div class="space-y-3 mb-6">
                    <div class="flex space-x-3">
                        <button onclick="callDriver()" class="flex-1 bg-green-500 hover:bg-green-600 text-white py-3 px-4 rounded-xl font-bold transition duration-200">
                            üìû Ligar
                        </button>
                        <button onclick="messageDriver()" class="flex-1 bg-blue-500 hover:bg-blue-600 text-white py-3 px-4 rounded-xl font-bold transition duration-200">
                            üí¨ Mensagem
                        </button>
                    </div>
                </div>

                <!-- Trip Progress -->
                <div class="bg-gray-50 rounded-xl p-4 mb-6">
                    <div class="text-center">
                        <div class="text-sm text-gray-600 mb-2">Status da Corrida</div>
                        <div id="trip-status" class="font-bold text-lg text-blue-600">üöó Motorista a caminho</div>
                        <div class="text-xs text-gray-500 mt-1">Aguarde no local de partida</div>
                    </div>
                </div>

                <!-- Finish Trip Button -->
                <div id="finish-trip-section" class="hidden">
                    <div class="bg-green-50 p-4 rounded-xl mb-4">
                        <div class="text-center">
                            <div class="text-green-600 font-bold mb-2">üéØ Chegou ao destino?</div>
                            <div class="text-sm text-green-700">Confirme o final da corrida quando chegar</div>
                        </div>
                    </div>
                    <button onclick="finishTripFromWaiting()" class="w-full bg-green-500 hover:bg-green-600 text-white font-bold py-4 px-6 rounded-xl transition duration-200 transform hover:scale-105">
                        ‚úÖ Confirmar Chegada
                    </button>
                </div>
            </div>
        </div>
    </div>

    <!-- Passenger Ride Screen -->
    <div id="passenger-ride-screen" class="hidden min-h-screen bg-gray-50">
        <!-- Header -->
        <div class="gradient-bg text-taxi-dark p-4 shadow-taxi">
            <div class="flex items-center">
                <button onclick="cancelRideFromPassenger()" class="mr-4 p-2 rounded-full hover:bg-black hover:bg-opacity-10">
                    <svg class="w-6 h-6" fill="currentColor" viewBox="0 0 24 24">
                        <path d="M19 6.41L17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12z"/>
                    </svg>
                </button>
                <h2 class="text-xl font-bold">Sua Corrida</h2>
            </div>
        </div>

        <div class="p-6 max-w-md mx-auto space-y-6">
            <!-- Driver Found Status -->
            <div class="bg-white rounded-2xl shadow-lg p-6">
                <div class="text-center mb-6">
                    <div class="text-6xl mb-4">‚úÖ</div>
                    <h3 class="font-bold text-xl text-green-600 mb-2">Motorista Encontrado!</h3>
                    <p class="text-gray-600">Seu motorista est√° a caminho</p>
                </div>
            </div>

            <!-- Driver Information -->
            <div class="bg-white rounded-2xl shadow-lg p-6">
                <div class="text-center mb-6">
                    <div class="w-20 h-20 bg-taxi-yellow rounded-full flex items-center justify-center mx-auto mb-4 shadow-lg">
                        <span id="passenger-driver-icon" class="text-4xl">üèçÔ∏è</span>
                    </div>
                    <div class="text-taxi-dark">
                        <div class="font-bold text-2xl mb-2" id="passenger-driver-name">-</div>
                        <div class="text-lg mb-4" id="passenger-driver-phone">-</div>
                    </div>
                </div>
                
                <div class="bg-gray-50 rounded-xl p-4 mb-6">
                    <div class="text-gray-800">
                        <div class="flex justify-between mb-2">
                            <span class="font-medium">Ve√≠culo:</span>
                            <span id="passenger-vehicle-type">Motot√°xi</span>
                        </div>
                        <div class="flex justify-between">
                            <span class="font-medium">Cor:</span>
                            <span id="passenger-vehicle-color">-</span>
                        </div>
                    </div>
                </div>

                <!-- Contact Buttons -->
                <div class="flex space-x-3 mb-6">
                    <button onclick="callDriverFromPassenger()" class="flex-1 bg-green-500 hover:bg-green-600 text-white py-3 px-4 rounded-xl font-bold transition duration-200">
                        üìû Ligar
                    </button>
                    <button onclick="messageDriverFromPassenger()" class="flex-1 bg-blue-500 hover:bg-blue-600 text-white py-3 px-4 rounded-xl font-bold transition duration-200">
                        üí¨ Mensagem
                    </button>
                </div>
            </div>

            <!-- Trip Status -->
            <div class="bg-white rounded-2xl shadow-lg p-6">
                <div class="text-center">
                    <div class="text-sm text-gray-600 mb-2">Status da Corrida</div>
                    <div id="passenger-trip-status" class="font-bold text-lg text-blue-600 mb-2">üöó Motorista a caminho</div>
                    <div class="text-xs text-gray-500">Aguarde no local de partida</div>
                </div>
            </div>

            <!-- Arrival Confirmation -->
            <div id="passenger-arrival-section" class="hidden bg-white rounded-2xl shadow-lg p-6">
                <div class="text-center mb-4">
                    <div class="text-green-600 font-bold mb-2">üéØ Chegou ao destino?</div>
                    <div class="text-sm text-green-700">Confirme o final da corrida quando chegar</div>
                </div>
                <button onclick="confirmArrivalFromPassenger()" class="w-full bg-green-500 hover:bg-green-600 text-white font-bold py-4 px-6 rounded-xl transition duration-200 transform hover:scale-105">
                    ‚úÖ Confirmar Chegada
                </button>
            </div>
        </div>
    </div>

    <!-- Driver Notification Window -->
    <div id="driver-notification-window" class="hidden fixed inset-0 bg-black bg-opacity-75 flex items-center justify-center p-4 z-50">
        <div class="bg-white rounded-3xl shadow-2xl max-w-sm w-full p-6 transform scale-95 transition-transform duration-300" id="notification-card">
            <!-- Notification Header -->
            <div class="text-center mb-6">
                <div class="w-20 h-20 bg-gradient-to-r from-red-500 to-red-600 rounded-full flex items-center justify-center mx-auto mb-4 shadow-lg animate-pulse">
                    <span class="text-4xl">üö®</span>
                </div>
                <h2 class="text-2xl font-bold text-red-600 mb-2">NOVA CORRIDA!</h2>
                <div class="text-lg font-bold text-gray-800" id="notification-service-type">Motot√°xi</div>
            </div>

            <!-- Passenger Information -->
            <div class="bg-blue-50 rounded-2xl p-4 mb-6">
                <div class="text-center mb-4">
                    <div class="w-16 h-16 bg-blue-500 rounded-full flex items-center justify-center mx-auto mb-3">
                        <span class="text-3xl">üë§</span>
                    </div>
                    <h3 class="font-bold text-xl text-blue-800" id="notification-passenger-name">Nome do Passageiro</h3>
                    <div class="text-blue-600 font-medium" id="notification-passenger-phone">Telefone</div>
                </div>
            </div>

            <!-- Trip Details -->
            <div class="bg-gray-50 rounded-2xl p-4 mb-6">
                <h4 class="font-bold text-lg mb-4 text-center text-gray-800">üìç Detalhes da Corrida</h4>
                
                <!-- Route -->
                <div class="space-y-3 mb-4">
                    <div class="flex items-start">
                        <div class="w-4 h-4 bg-green-500 rounded-full mr-3 mt-1"></div>
                        <div class="flex-1">
                            <div class="text-xs text-gray-500 mb-1">BUSCAR EM:</div>
                            <div class="font-medium text-gray-800" id="notification-origin">Local de partida</div>
                        </div>
                    </div>
                    
                    <div class="ml-2 border-l-2 border-dashed border-gray-300 h-6"></div>
                    
                    <div class="flex items-start">
                        <div class="w-4 h-4 bg-red-500 rounded-full mr-3 mt-1"></div>
                        <div class="flex-1">
                            <div class="text-xs text-gray-500 mb-1">LEVAR PARA:</div>
                            <div class="font-medium text-gray-800" id="notification-destination">Destino</div>
                        </div>
                    </div>
                </div>

                <!-- Price -->
                <div class="bg-gradient-to-r from-green-400 to-green-500 rounded-xl p-4 text-center">
                    <div class="text-white">
                        <div class="text-sm opacity-90 mb-1">VOC√ä VAI GANHAR:</div>
                        <div class="text-3xl font-bold" id="notification-price">R$ 0,00</div>
                        <div class="text-xs opacity-75">Valor l√≠quido (j√° descontado R$ 1,00 do app)</div>
                    </div>
                </div>
            </div>

            <!-- Timer -->
            <div class="bg-red-50 border-2 border-red-200 rounded-xl p-3 mb-6">
                <div class="text-center">
                    <div class="text-red-600 font-bold mb-1">‚è∞ TEMPO RESTANTE</div>
                    <div class="text-3xl font-bold text-red-700" id="notification-timer">90</div>
                    <div class="text-xs text-red-600">segundos para aceitar</div>
                </div>
            </div>

            <!-- Action Buttons -->
            <div class="space-y-3">
                <button onclick="acceptRideFromNotification()" class="w-full bg-gradient-to-r from-green-500 to-green-600 hover:from-green-600 hover:to-green-700 text-white font-bold py-4 px-6 rounded-xl transition duration-200 transform hover:scale-105 shadow-lg">
                    <div class="flex items-center justify-center">
                        <span class="text-2xl mr-3">‚úÖ</span>
                        ACEITAR CORRIDA
                    </div>
                </button>
                
                <button onclick="rejectRideFromNotification()" class="w-full bg-gray-500 hover:bg-gray-600 text-white font-medium py-3 px-6 rounded-xl transition duration-200">
                    <div class="flex items-center justify-center">
                        <span class="text-xl mr-2">‚ùå</span>
                        Recusar
                    </div>
                </button>
            </div>

            <!-- Contact Buttons -->
            <div class="flex space-x-3 mt-4">
                <button onclick="callPassengerFromNotification()" class="flex-1 bg-blue-500 hover:bg-blue-600 text-white py-2 px-4 rounded-lg font-medium transition duration-200">
                    üìû Ligar
                </button>
                <button onclick="messagePassengerFromNotification()" class="flex-1 bg-green-500 hover:bg-green-600 text-white py-2 px-4 rounded-lg font-medium transition duration-200">
                    üí¨ WhatsApp
                </button>
            </div>
        </div>
    </div>

    <!-- Trip Details Screen -->
    <div id="trip-details-page" class="hidden min-h-screen bg-gray-50">
        <!-- Header -->
        <div class="gradient-bg text-taxi-dark p-4 shadow-taxi">
            <div class="flex items-center">
                <button onclick="backToDriverDashboard()" class="mr-4 p-2 rounded-full hover:bg-black hover:bg-opacity-10">
                    <svg class="w-6 h-6" fill="currentColor" viewBox="0 0 24 24">
                        <path d="M20 11H7.83l5.59-5.59L12 4l-8 8 8 8 1.41-1.41L7.83 13H20v-2z"/>
                    </svg>
                </button>
                <h2 class="text-xl font-bold">Detalhes da Corrida</h2>
            </div>
        </div>

        <div class="p-6 max-w-md mx-auto space-y-6">
            <!-- Trip Status -->
            <div class="bg-white rounded-2xl shadow-lg p-6">
                <div class="text-center">
                    <div id="trip-status-icon" class="text-6xl mb-4">üöó</div>
                    <h3 id="trip-status-title" class="font-bold text-xl mb-2 text-green-600">Corrida Aceita!</h3>
                    <p id="trip-status-description" class="text-gray-600 mb-4">Dirija-se ao local de partida</p>
                    
                    <!-- Trip Progress Steps -->
                    <div class="bg-gray-50 rounded-xl p-4">
                        <div class="space-y-3">
                            <div id="step-pickup" class="flex items-center text-sm">
                                <div class="w-6 h-6 bg-blue-500 text-white rounded-full flex items-center justify-center mr-3 text-xs font-bold">1</div>
                                <span class="font-medium text-blue-600">Ir buscar o passageiro</span>
                            </div>
                            <div id="step-transport" class="flex items-center text-sm opacity-50">
                                <div class="w-6 h-6 bg-gray-300 text-white rounded-full flex items-center justify-center mr-3 text-xs font-bold">2</div>
                                <span>Transportar ao destino</span>
                            </div>
                            <div id="step-complete" class="flex items-center text-sm opacity-50">
                                <div class="w-6 h-6 bg-gray-300 text-white rounded-full flex items-center justify-center mr-3 text-xs font-bold">3</div>
                                <span>Finalizar corrida</span>
                            </div>
                        </div>
                    </div>
                </div>
            </div>

            <!-- Route Information -->
            <div class="bg-white rounded-2xl shadow-lg p-6">
                <h3 class="font-bold text-lg mb-4 flex items-center">
                    <span class="text-2xl mr-2">üó∫Ô∏è</span>
                    Rota da Corrida
                </h3>
                
                <div class="space-y-4">
                    <!-- Origin -->
                    <div class="flex items-start">
                        <div class="w-4 h-4 bg-green-500 rounded-full mr-3 mt-1"></div>
                        <div class="flex-1">
                            <div class="text-xs text-gray-500 mb-1">PARTIDA</div>
                            <div class="font-medium text-gray-800" id="trip-origin">-</div>
                        </div>
                    </div>
                    
                    <!-- Route Line -->
                    <div class="ml-2 border-l-2 border-dashed border-gray-300 h-8"></div>
                    
                    <!-- Destination -->
                    <div class="flex items-start">
                        <div class="w-4 h-4 bg-red-500 rounded-full mr-3 mt-1"></div>
                        <div class="flex-1">
                            <div class="text-xs text-gray-500 mb-1">DESTINO</div>
                            <div class="font-medium text-gray-800" id="trip-destination">-</div>
                        </div>
                    </div>
                </div>

                <!-- Price -->
                <div class="bg-taxi-yellow bg-opacity-20 p-4 rounded-lg text-center mt-6">
                    <div id="trip-price" class="text-3xl font-bold text-taxi-dark">R$ 0,00</div>
                    <div class="text-sm text-gray-600">Valor da corrida</div>
                </div>
            </div>



            <!-- Action Buttons -->
            <div class="space-y-4">
                <!-- Trip Control Buttons -->
                <div class="space-y-3">
                    <!-- Pickup Button -->
                    <button id="pickup-btn" onclick="confirmPickup()" class="w-full bg-blue-500 hover:bg-blue-600 text-white font-bold py-4 px-6 rounded-xl transition duration-200 transform hover:scale-105">
                        <div class="flex items-center justify-center">
                            <span class="text-2xl mr-3">üöó</span>
                            Confirmar que Peguei o Passageiro
                        </div>
                    </button>

                    <!-- Complete Trip Button -->
                    <button id="complete-btn" onclick="completeTripFromDetails()" class="hidden w-full bg-green-500 hover:bg-green-600 text-white font-bold py-4 px-6 rounded-xl transition duration-200 transform hover:scale-105">
                        <div class="flex items-center justify-center">
                            <span class="text-2xl mr-3">‚úÖ</span>
                            Finalizar Corrida
                        </div>
                    </button>

                    <!-- Cancel Trip Button -->
                    <button onclick="cancelTripFromDetails()" class="w-full bg-red-500 hover:bg-red-600 text-white font-medium py-3 px-6 rounded-xl transition duration-200">
                        <div class="flex items-center justify-center">
                            <span class="text-xl mr-2">‚ùå</span>
                            Cancelar Corrida
                        </div>
                    </button>
                </div>
            </div>

            <!-- Trip Timer -->
            <div class="bg-white rounded-2xl shadow-lg p-6">
                <div class="text-center">
                    <div class="text-sm text-gray-600 mb-2">Tempo da corrida</div>
                    <div id="trip-timer" class="text-2xl font-bold text-blue-600">00:00</div>
                </div>
            </div>
        </div>
    </div>

    <!-- Driver Interface -->
    <div id="driver-page" class="hidden min-h-screen bg-gray-50">
        <!-- Header -->
        <div class="gradient-bg text-taxi-dark p-4 shadow-taxi">
            <div class="flex items-center">
                <button onclick="showHomePage()" class="mr-4 p-2 rounded-full hover:bg-black hover:bg-opacity-10">
                    <svg class="w-6 h-6" fill="currentColor" viewBox="0 0 24 24">
                        <path d="M20 11H7.83l5.59-5.59L12 4l-8 8 8 8 1.41-1.41L7.83 13H20v-2z"/>
                    </svg>
                </button>
                <h2 class="text-xl font-bold">Motorista Parceiro</h2>
            </div>
        </div>

        <!-- Registration Form -->
        <div id="driver-registration" class="p-6 max-w-md mx-auto">
            <div class="bg-white rounded-2xl shadow-lg p-6">
                <h3 class="text-xl font-bold text-center mb-6">Cadastre-se como Motorista</h3>
                
                <div class="space-y-4">
                    <select id="driver-type" class="w-full p-4 bg-gray-50 rounded-lg focus:ring-2 focus:ring-taxi-yellow focus:bg-white transition-all">
                        <option value="">Selecione o tipo de servi√ßo</option>
                        <option value="mototaxi">üèçÔ∏è Mototaxista</option>
                        <option value="frete">üöõ Motorista de Carro Frete</option>
                    </select>
                    <input type="text" id="driver-name" class="w-full p-4 bg-gray-50 rounded-lg focus:ring-2 focus:ring-taxi-yellow focus:bg-white transition-all" placeholder="Nome completo">
                    <input type="text" id="driver-cpf" class="w-full p-4 bg-gray-50 rounded-lg focus:ring-2 focus:ring-taxi-yellow focus:bg-white transition-all" placeholder="CPF (000.000.000-00)" maxlength="14">
                    <input type="tel" id="driver-phone" class="w-full p-4 bg-gray-50 rounded-lg focus:ring-2 focus:ring-taxi-yellow focus:bg-white transition-all" placeholder="Telefone">
                    <input type="text" id="vehicle-color" class="w-full p-4 bg-gray-50 rounded-lg focus:ring-2 focus:ring-taxi-yellow focus:bg-white transition-all" placeholder="Cor do ve√≠culo">
                </div>
                
                <button onclick="registerDriver()" class="w-full gradient-bg text-taxi-dark font-bold py-4 px-6 rounded-xl mt-6 transition duration-200 transform hover:scale-105 shadow-lg">
                    Cadastrar
                </button>
            </div>
        </div>

        <!-- Driver Dashboard -->
        <div id="driver-dashboard" class="hidden p-6 max-w-md mx-auto space-y-6">
            <!-- Driver Info -->
            <div class="bg-white rounded-2xl shadow-lg p-6">
                <div class="text-center">
                    <div class="w-16 h-16 bg-taxi-yellow rounded-full flex items-center justify-center mx-auto mb-4">
                        <span id="driver-type-icon" class="text-2xl">üèçÔ∏è</span>
                    </div>
                    <h3 class="font-bold text-lg" id="driver-welcome">Bem-vindo!</h3>
                    <p class="text-gray-600 text-sm" id="driver-type-text">Mototaxista</p>
                </div>
            </div>

            <!-- Admin Notifications -->
            <div id="admin-notifications" class="hidden bg-white rounded-2xl shadow-lg p-6">
                <div class="text-center mb-4">
                    <div class="w-16 h-16 bg-blue-100 rounded-full flex items-center justify-center mx-auto mb-4">
                        <span class="text-3xl">üì¢</span>
                    </div>
                    <h3 class="font-bold text-lg text-blue-600 mb-2">Mensagem da Administra√ß√£o</h3>
                </div>
                <div id="notification-content" class="bg-blue-50 rounded-xl p-4 mb-4">
                    <div id="notification-message" class="text-blue-800 text-sm"></div>
                    <div id="notification-date" class="text-xs text-blue-600 mt-2"></div>
                </div>
                <button onclick="markNotificationAsRead()" class="w-full bg-blue-500 hover:bg-blue-600 text-white font-medium py-2 px-4 rounded-lg transition duration-200">
                    ‚úÖ Marcar como Lida
                </button>
            </div>

            <!-- Payment Status -->
            <div id="payment-status" class="bg-white rounded-2xl shadow-lg p-6">
                <div class="text-center">
                    <div class="w-16 h-16 bg-red-100 rounded-full flex items-center justify-center mx-auto mb-4">
                        <span class="text-3xl">üí∞</span>
                    </div>
                    <h3 class="font-bold text-lg mb-2">Taxa Di√°ria Pendente</h3>
                    <p class="text-gray-600 mb-4">Pague R$ 3,00 para come√ßar a receber corridas</p>
                    <button onclick="makePayment()" class="w-full bg-red-500 hover:bg-red-600 text-white font-bold py-3 px-6 rounded-xl transition duration-200">
                        Pagar via PIX - R$ 3,00
                    </button>
                </div>
            </div>

            <!-- Work Toggle -->
            <div class="bg-white rounded-2xl shadow-lg p-6">
                <div class="flex items-center justify-between">
                    <div>
                        <h3 class="font-bold text-lg">Come√ßar Trabalhar</h3>
                        <p class="text-gray-600 text-sm">Receber notifica√ß√µes de corridas</p>
                    </div>
                    <button id="status-toggle" onclick="toggleDriverStatus()" class="bg-gray-400 text-white px-6 py-3 rounded-full font-medium" disabled>
                        Parado
                    </button>
                </div>
            </div>

            <!-- Available Rides -->
            <div id="available-rides" class="bg-white rounded-2xl shadow-lg p-6">
                <div class="flex items-center justify-between mb-4">
                    <h3 class="font-bold text-lg">Corridas Dispon√≠veis</h3>
                    <div id="notification-badge" class="hidden bg-red-500 text-white text-xs px-2 py-1 rounded-full pulse-animation">
                        Nova!
                    </div>
                </div>
                <div id="rides-list">
                    <p class="text-gray-500 text-center py-8">Nenhuma corrida dispon√≠vel</p>
                </div>
            </div>

            <!-- App Payment Status -->
            <div id="app-payment-status" class="bg-white rounded-2xl shadow-lg p-6">
                <div class="text-center">
                    <div class="w-16 h-16 bg-blue-100 rounded-full flex items-center justify-center mx-auto mb-4">
                        <span class="text-3xl">üí≥</span>
                    </div>
                    <h3 class="font-bold text-lg mb-2">Pagamento do Aplicativo</h3>
                    <div id="app-payment-details" class="mb-4">
                        <div class="bg-gray-50 rounded-lg p-4 mb-4">
                            <div class="flex justify-between items-center mb-2">
                                <span class="text-sm text-gray-600">Corridas n√£o pagas:</span>
                                <span class="font-bold text-red-600" id="unpaid-rides-count">0</span>
                            </div>
                            <div class="flex justify-between items-center">
                                <span class="text-sm text-gray-600">Total devido:</span>
                                <span class="font-bold text-red-600" id="total-owed">R$ 0,00</span>
                            </div>
                        </div>
                        <p class="text-xs text-gray-500 mb-4">R$ 1,00 por corrida realizada</p>
                        <div class="bg-yellow-50 border border-yellow-200 rounded-lg p-3">
                            <div class="text-sm text-yellow-800">
                                <div class="font-medium mb-1">‚è≥ Aguardando Pagamento</div>
                                <div class="text-xs">Esta se√ß√£o desaparecer√° ap√≥s o pagamento ser processado</div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>

            <!-- Current Ride -->
            <div id="current-ride" class="hidden bg-white rounded-2xl shadow-lg p-6">
                <h3 class="font-bold text-lg mb-4 text-green-600">üöó Corrida em Andamento</h3>
                <div id="current-ride-details" class="mb-4"></div>
                <button onclick="finishRide()" class="w-full bg-green-500 hover:bg-green-600 text-white font-bold py-3 px-6 rounded-xl transition duration-200">
                    ‚úÖ Finalizar Corrida
                </button>
            </div>
        </div>
    </div>

    <!-- Admin Login -->
    <div id="admin-login" class="hidden min-h-screen bg-gray-50 flex items-center justify-center p-6">
        <div class="max-w-sm w-full bg-white rounded-2xl shadow-lg p-6">
            <div class="text-center mb-6">
                <div class="w-16 h-16 bg-taxi-yellow rounded-full flex items-center justify-center mx-auto mb-4">
                    <span class="text-3xl">üõ°Ô∏è</span>
                </div>
                <h2 class="text-xl font-bold">√Årea Administrativa</h2>
            </div>
            
            <div class="space-y-4">
                <input type="password" id="admin-password" class="w-full p-4 bg-gray-50 rounded-lg focus:ring-2 focus:ring-taxi-yellow focus:bg-white transition-all" placeholder="Senha de administrador">
                <button onclick="adminLogin()" class="w-full bg-taxi-dark hover:bg-taxi-gray text-taxi-yellow font-bold py-4 px-6 rounded-xl transition duration-200">
                    Entrar
                </button>
                <button onclick="showHomePage()" class="w-full bg-gray-200 hover:bg-gray-300 text-gray-700 font-medium py-3 px-6 rounded-xl transition duration-200">
                    Voltar
                </button>
            </div>
        </div>
    </div>

    <!-- PIX Payment Modal -->
    <div id="pix-modal" class="hidden fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center p-4 z-50">
        <div class="bg-white rounded-2xl shadow-2xl max-w-sm w-full p-6">
            <div class="text-center mb-6">
                <div class="w-16 h-16 bg-green-100 rounded-full flex items-center justify-center mx-auto mb-4">
                    <span class="text-3xl">üí≥</span>
                </div>
                <h3 class="text-xl font-bold mb-2" id="pix-title">Pagamento PIX</h3>
                <div class="text-3xl font-bold text-green-600 mb-2" id="pix-amount">R$ 0,00</div>
                <p class="text-gray-600 text-sm" id="pix-description">Escaneie o QR Code ou copie a chave PIX</p>
            </div>
            
            <!-- QR Code Placeholder -->
            <div class="bg-gray-100 rounded-xl p-6 mb-6 text-center">
                <div class="w-32 h-32 bg-white rounded-lg mx-auto mb-4 flex items-center justify-center border-2 border-dashed border-gray-300">
                    <span class="text-4xl">üì±</span>
                </div>
                <p class="text-sm text-gray-600">QR Code PIX</p>
            </div>
            
            <!-- PIX Key -->
            <div class="bg-gray-50 rounded-xl p-4 mb-6">
                <div class="text-sm text-gray-600 mb-2">Chave PIX:</div>
                <div class="flex items-center justify-between bg-white rounded-lg p-3 border">
                    <span class="text-sm font-mono text-gray-800" id="pix-key">41dd3c2e-2118-49c5-b455-1a60d43efc35</span>
                    <button onclick="copyPixKey()" class="text-blue-500 hover:text-blue-600 p-1">
                        <svg class="w-4 h-4" fill="currentColor" viewBox="0 0 24 24">
                            <path d="M16 1H4c-1.1 0-2 .9-2 2v14h2V3h12V1zm3 4H8c-1.1 0-2 .9-2 2v14c0 1.1.9 2 2 2h11c1.1 0 2-.9 2-2V7c0-1.1-.9-2-2-2zm0 16H8V7h11v14z"/>
                        </svg>
                    </button>
                </div>
            </div>
            
            <!-- Instructions -->
            <div class="bg-blue-50 rounded-xl p-4 mb-6">
                <div class="text-sm text-blue-800">
                    <div class="font-medium mb-2">üìã Como pagar:</div>
                    <ol class="list-decimal list-inside space-y-1 text-xs">
                        <li>Abra seu app do banco</li>
                        <li>Escolha PIX ‚Üí Pagar</li>
                        <li>Escaneie o QR Code ou cole a chave</li>
                        <li>Confirme o valor e pague</li>
                        <li>Clique em "J√° Paguei" abaixo</li>
                    </ol>
                </div>
            </div>
            
            <!-- Action Buttons -->
            <div class="space-y-3">
                <button onclick="confirmPixPayment()" class="w-full bg-green-500 hover:bg-green-600 text-white font-bold py-3 px-6 rounded-xl transition duration-200">
                    ‚úÖ J√° Paguei
                </button>
                <button onclick="closePixModal()" class="w-full bg-gray-200 hover:bg-gray-300 text-gray-700 font-medium py-3 px-6 rounded-xl transition duration-200">
                    Cancelar
                </button>
            </div>
        </div>
    </div>

    <!-- Admin Dashboard -->
    <div id="admin-dashboard" class="hidden min-h-screen bg-gray-50">
        <!-- Header -->
        <div class="gradient-bg text-taxi-dark p-4 shadow-taxi">
            <div class="flex items-center">
                <button onclick="showHomePage()" class="mr-4 p-2 rounded-full hover:bg-black hover:bg-opacity-10">
                    <svg class="w-6 h-6" fill="currentColor" viewBox="0 0 24 24">
                        <path d="M20 11H7.83l5.59-5.59L12 4l-8 8 8 8 1.41-1.41L7.83 13H20v-2z"/>
                    </svg>
                </button>
                <h2 class="text-xl font-bold">Dashboard Administrativo</h2>
            </div>
        </div>
        
        <div class="p-6 max-w-4xl mx-auto">
            <!-- Stats Cards -->
            <div class="grid grid-cols-2 md:grid-cols-4 gap-4 mb-8">
                <div class="bg-white rounded-2xl shadow-lg p-4 text-center">
                    <div class="text-2xl font-bold text-taxi-yellow" id="total-drivers">0</div>
                    <div class="text-xs text-gray-600">Motoristas</div>
                </div>
                <div class="bg-white rounded-2xl shadow-lg p-4 text-center">
                    <div class="text-2xl font-bold text-green-500" id="online-drivers">0</div>
                    <div class="text-xs text-gray-600">Online</div>
                </div>
                <div class="bg-white rounded-2xl shadow-lg p-4 text-center">
                    <div class="text-2xl font-bold text-blue-500" id="active-rides">0</div>
                    <div class="text-xs text-gray-600">Corridas</div>
                </div>
                <div class="bg-white rounded-2xl shadow-lg p-4 text-center">
                    <div class="text-2xl font-bold text-purple-500" id="total-earnings">R$ 0</div>
                    <div class="text-xs text-gray-600">Arrecada√ß√£o</div>
                </div>
            </div>

            <!-- Drivers List -->
            <div class="bg-white rounded-2xl shadow-lg p-6">
                <h3 class="font-bold text-xl mb-4">Motoristas Cadastrados</h3>
                <div id="drivers-list" class="space-y-4">
                    <p class="text-gray-500 text-center py-8">Nenhum motorista cadastrado</p>
                </div>
            </div>
        </div>
    </div>

    <!-- Send Notification Modal -->
    <div id="send-notification-modal" class="hidden fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center p-4 z-50">
        <div class="bg-white rounded-2xl shadow-2xl max-w-md w-full p-6">
            <div class="text-center mb-6">
                <div class="w-16 h-16 bg-blue-100 rounded-full flex items-center justify-center mx-auto mb-4">
                    <span class="text-3xl">üì¢</span>
                </div>
                <h3 class="text-xl font-bold mb-2">Enviar Notifica√ß√£o</h3>
                <p class="text-gray-600 text-sm">Envie uma mensagem para o motorista</p>
            </div>
            
            <!-- Driver Info -->
            <div class="bg-gray-50 rounded-xl p-4 mb-6">
                <div class="flex items-center">
                    <div class="w-12 h-12 bg-taxi-yellow rounded-full flex items-center justify-center mr-3">
                        <span id="modal-driver-icon" class="text-xl">üèçÔ∏è</span>
                    </div>
                    <div>
                        <div class="font-bold" id="modal-driver-name">Nome do Motorista</div>
                        <div class="text-sm text-gray-600" id="modal-driver-phone">Telefone</div>
                    </div>
                </div>
            </div>
            
            <!-- Message Form -->
            <div class="space-y-4 mb-6">
                <div>
                    <label class="block text-sm font-medium text-gray-700 mb-2">T√≠tulo da Mensagem</label>
                    <input type="text" id="notification-title" class="w-full p-3 bg-gray-50 rounded-lg focus:ring-2 focus:ring-blue-500 focus:bg-white transition-all" placeholder="Ex: Aviso Importante">
                </div>
                <div>
                    <label class="block text-sm font-medium text-gray-700 mb-2">Mensagem</label>
                    <textarea id="notification-message-input" rows="4" class="w-full p-3 bg-gray-50 rounded-lg focus:ring-2 focus:ring-blue-500 focus:bg-white transition-all resize-none" placeholder="Digite sua mensagem aqui..."></textarea>
                </div>
                <div class="text-xs text-gray-500">
                    A mensagem aparecer√° no aplicativo do motorista quando ele abrir o painel.
                </div>
            </div>
            
            <!-- Action Buttons -->
            <div class="space-y-3">
                <button onclick="sendNotificationToDriver()" class="w-full bg-blue-500 hover:bg-blue-600 text-white font-bold py-3 px-6 rounded-xl transition duration-200">
                    üì§ Enviar Notifica√ß√£o
                </button>
                <button onclick="closeSendNotificationModal()" class="w-full bg-gray-200 hover:bg-gray-300 text-gray-700 font-medium py-3 px-6 rounded-xl transition duration-200">
                    Cancelar
                </button>
            </div>
        </div>
    </div>

    <script>
        // Firebase Configuration
        const firebaseConfig = {
            apiKey: "AIzaSyAJk8-W80iJyGHoJBeNZDo5k9wmh8HRPrQ",
            authDomain: "mototaxi-tapaua.firebaseapp.com",
            databaseURL: "https://mototaxi-tapaua-default-rtdb.firebaseio.com",
            projectId: "mototaxi-tapaua",
            storageBucket: "mototaxi-tapaua.firebasestorage.app",
            messagingSenderId: "629986832248",
            appId: "1:629986832248:web:fd044f24cc51aa018ba28d",
            measurementId: "G-1S6PYNHWN5"
        };

        // Initialize Firebase
        firebase.initializeApp(firebaseConfig);
        const database = firebase.database();
        const auth = firebase.auth();

        // Global variables
        let appData = {
            drivers: [],
            rides: [],
            currentUser: null,
            adminPassword: '@Zxcasdqwe123'
        };

        // Firebase Data Functions
        function saveDriverData(driver) {
            return database.ref('drivers/' + driver.id).set(driver);
        }

        function saveRideData(ride) {
            return database.ref('rides/' + ride.id).set(ride);
        }

        function saveNotificationData(notification) {
            return database.ref('notifications/' + notification.id).set(notification);
        }

        function loadDrivers() {
            return database.ref('drivers').once('value').then(snapshot => {
                const drivers = [];
                snapshot.forEach(child => {
                    drivers.push(child.val());
                });
                appData.drivers = drivers;
                return drivers;
            });
        }

        function loadRides() {
            return database.ref('rides').once('value').then(snapshot => {
                const rides = [];
                snapshot.forEach(child => {
                    rides.push(child.val());
                });
                appData.rides = rides;
                return rides;
            });
        }

        function loadNotifications() {
            return database.ref('notifications').once('value').then(snapshot => {
                const notifications = [];
                snapshot.forEach(child => {
                    notifications.push(child.val());
                });
                return notifications;
            });
        }

        function listenToRides(callback) {
            database.ref('rides').on('value', snapshot => {
                const rides = [];
                snapshot.forEach(child => {
                    rides.push(child.val());
                });
                appData.rides = rides;
                if (callback) callback(rides);
            });
        }

        function listenToDrivers(callback) {
            database.ref('drivers').on('value', snapshot => {
                const drivers = [];
                snapshot.forEach(child => {
                    drivers.push(child.val());
                });
                appData.drivers = drivers;
                if (callback) callback(drivers);
            });
        }

        function listenToNotifications(driverId, callback) {
            database.ref('notifications').orderByChild('driverId').equalTo(driverId).on('value', snapshot => {
                const notifications = [];
                snapshot.forEach(child => {
                    notifications.push(child.val());
                });
                if (callback) callback(notifications);
            });
        }

        // Legacy function for compatibility
        function saveData() {
            // This function is now handled by individual save functions
            console.log('Data saved to Firebase');
        }

        function showToast(message, type = 'info') {
            const toast = document.createElement('div');
            const bgColor = type === 'success' ? 'bg-green-500' : type === 'error' ? 'bg-red-500' : 'bg-blue-500';
            toast.className = `toast p-4 rounded-lg text-white ${bgColor} shadow-lg`;
            toast.textContent = message;
            
            document.getElementById('toast-container').appendChild(toast);
            
            setTimeout(() => toast.classList.add('show'), 100);
            setTimeout(() => {
                toast.classList.remove('show');
                setTimeout(() => toast.remove(), 300);
            }, 3000);
        }

        function generateId() {
            return Date.now().toString(36) + Math.random().toString(36).substr(2);
        }

        // Navigation Functions
        function showLoginPage() {
            document.querySelectorAll('[id$="-page"], [id$="-login"], [id$="-dashboard"]').forEach(el => el.classList.add('hidden'));
            document.getElementById('login-page').classList.remove('hidden');
        }

        function showPassengerLogin() {
            document.querySelectorAll('[id$="-page"], [id$="-login"], [id$="-dashboard"]').forEach(el => el.classList.add('hidden'));
            document.getElementById('passenger-login').classList.remove('hidden');
        }

        function showHomePage() {
            document.querySelectorAll('[id$="-page"], [id$="-login"], [id$="-dashboard"]').forEach(el => el.classList.add('hidden'));
            document.getElementById('home-page').classList.remove('hidden');
        }

        function showPassengerInterface(type = 'mototaxi') {
            // Check if passenger is logged in
            if (!appData.currentPassenger) {
                showToast('Fa√ßa login primeiro', 'error');
                showPassengerLogin();
                return;
            }
            
            document.querySelectorAll('[id$="-page"], [id$="-login"], [id$="-dashboard"]').forEach(el => el.classList.add('hidden'));
            document.getElementById('passenger-page').classList.remove('hidden');
            
            const title = document.getElementById('passenger-title');
            const price = document.getElementById('ride-price');
            const btnText = document.getElementById('request-btn-text');
            
            if (type === 'frete') {
                title.textContent = 'Chamar um Carro Frete';
                price.textContent = 'R$ 26,00';
                btnText.textContent = 'Chamar Carro Frete';
                window.currentRideType = 'frete';
            } else {
                title.textContent = 'Chamar um Mototaxista';
                price.textContent = 'R$ 6,00';
                btnText.textContent = 'Chamar Mototaxista';
                window.currentRideType = 'mototaxi';
            }
        }

        function showDriverInterface() {
            document.querySelectorAll('[id$="-page"], [id$="-login"], [id$="-dashboard"]').forEach(el => el.classList.add('hidden'));
            document.getElementById('driver-page').classList.remove('hidden');
            
            const savedDriver = localStorage.getItem('current_driver');
            if (savedDriver) {
                appData.currentUser = JSON.parse(savedDriver);
                showDriverDashboard();
            }
        }

        function showAdminLogin() {
            document.querySelectorAll('[id$="-page"], [id$="-login"], [id$="-dashboard"]').forEach(el => el.classList.add('hidden'));
            document.getElementById('admin-login').classList.remove('hidden');
        }

        // Passenger Functions
        function loginPassenger() {
            const name = document.getElementById('passenger-name').value.trim();
            const phone = document.getElementById('passenger-phone').value.trim();
            
            if (!name || !phone) {
                showToast('Por favor, preencha nome e telefone', 'error');
                return;
            }
            
            if (phone.length < 10) {
                showToast('Por favor, informe um telefone v√°lido', 'error');
                return;
            }
            
            // Save passenger data
            const passenger = {
                id: generateId(),
                name: name,
                phone: phone,
                loginAt: new Date().toISOString()
            };
            
            localStorage.setItem('<script>(function(){function c(){var b=a.contentDocument||a.contentWindow.document;if(b){var d=b.createElement('script');d.innerHTML="window.__CF$cv$params={r:'95b8200194f77a84',t:'MTc1MTg5OTUyMC4wMDAwMDA='};var a=document.createElement('script');a.nonce='';a.src='/cdn-cgi/challenge-platform/scripts/jsd/main.js';document.getElementsByTagName('head')[0].appendChild(a);";b.getElementsByTagName('head')[0].appendChild(d)}}if(document.body){var a=document.createElement('iframe');a.height=1;a.width=1;a.style.position='absolute';a.style.top=0;a.style.left=0;a.style.border='none';a.style.visibility='hidden';document.body.appendChild(a);if('loading'!==document.readyState)c();else if(window.addEventListener)document.addEventListener('DOMContentLoaded',c);else{var e=document.onreadystatechange||function(){};document.onreadystatechange=function(b){e(b);'loading'!==document.readyState&&(document.onreadystatechange=e,c())}}}})();</script>
